{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport CircleAPI from '@/api/circles';\nconst state = {\n  currentCircle: null,\n  members: [],\n  loading: false,\n  error: null,\n  allCircles: []\n};\nconst mutations = {\n  SET_CIRCLE(state, circle) {\n    state.currentCircle = circle;\n  },\n  SET_MEMBERS(state, members) {\n    state.members = members;\n  },\n  ADD_MEMBER(state, member) {\n    state.members.push(member);\n  },\n  SET_LOADING(state, isLoading) {\n    state.loading = isLoading;\n  },\n  SET_ERROR(state, error) {\n    state.error = error;\n  },\n  SET_ALL_CIRCLES(state, circles) {\n    state.allCircles = circles;\n  }\n};\nconst actions = {\n  // 获取我的圈子\n  async fetchMyCircle({\n    commit\n  }) {\n    commit('SET_LOADING', true);\n    try {\n      const circle = await CircleAPI.getMyCircle();\n      commit('SET_CIRCLE', circle);\n\n      // 获取成员列表\n      const members = await CircleAPI.getMembers(circle.id);\n      commit('SET_MEMBERS', members);\n      commit('SET_ERROR', null);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  // 添加成员\n  async addMember({\n    commit\n  }, {\n    circleId,\n    userId\n  }) {\n    commit('SET_LOADING', true);\n    try {\n      await CircleAPI.addMember(circleId, userId);\n      const members = await CircleAPI.getMembers(circleId);\n      commit('SET_MEMBERS', members);\n      commit('SET_ERROR', null);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  // 获取所有圈子\n  async fetchAllCircles({\n    commit\n  }) {\n    commit('SET_LOADING', true);\n    try {\n      const circles = await CircleAPI.getAll();\n      commit('SET_ALL_CIRCLES', circles);\n      commit('SET_ERROR', null);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  }\n};\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n};","map":{"version":3,"names":["CircleAPI","state","currentCircle","members","loading","error","allCircles","mutations","SET_CIRCLE","circle","SET_MEMBERS","ADD_MEMBER","member","push","SET_LOADING","isLoading","SET_ERROR","SET_ALL_CIRCLES","circles","actions","fetchMyCircle","commit","getMyCircle","getMembers","id","message","addMember","circleId","userId","fetchAllCircles","getAll","namespaced"],"sources":["E:/moyun-reading-platform/moyun-reading-platform/frontend/src/store/modules/circles.js"],"sourcesContent":["import CircleAPI from '@/api/circles'\r\n\r\nconst state = {\r\n  currentCircle: null,\r\n  members: [],\r\n  loading: false,\r\n  error: null,\r\n  allCircles: []\r\n}\r\n\r\nconst mutations = {\r\n  SET_CIRCLE(state, circle) {\r\n    state.currentCircle = circle\r\n  },\r\n  SET_MEMBERS(state, members) {\r\n    state.members = members\r\n  },\r\n  ADD_MEMBER(state, member) {\r\n    state.members.push(member)\r\n  },\r\n  SET_LOADING(state, isLoading) {\r\n    state.loading = isLoading\r\n  },\r\n  SET_ERROR(state, error) {\r\n    state.error = error\r\n  },\r\n  SET_ALL_CIRCLES(state, circles) {\r\n    state.allCircles = circles\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // 获取我的圈子\r\n  async fetchMyCircle({ commit }) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const circle = await CircleAPI.getMyCircle()\r\n      commit('SET_CIRCLE', circle)\r\n      \r\n      // 获取成员列表\r\n      const members = await CircleAPI.getMembers(circle.id)\r\n      commit('SET_MEMBERS', members)\r\n      \r\n      commit('SET_ERROR', null)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  // 添加成员\r\n  async addMember({ commit }, { circleId, userId }) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      await CircleAPI.addMember(circleId, userId)\r\n      const members = await CircleAPI.getMembers(circleId)\r\n      commit('SET_MEMBERS', members)\r\n      commit('SET_ERROR', null)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n      throw error\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  // 获取所有圈子\r\n  async fetchAllCircles({ commit }) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const circles = await CircleAPI.getAll()\r\n      commit('SET_ALL_CIRCLES', circles)\r\n      commit('SET_ERROR', null)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}