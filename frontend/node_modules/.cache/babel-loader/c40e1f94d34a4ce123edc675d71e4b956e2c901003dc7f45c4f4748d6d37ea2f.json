{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"register-container\"\n};\nconst _hoisted_2 = {\n  class: \"footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, {\n    class: \"register-card\"\n  }, {\n    default: _withCtx(() => [_cache[7] || (_cache[7] = _createElementVNode(\"h2\", null, \"注册新账号\", -1 /* HOISTED */)), _createVNode(_component_el_form, {\n      model: $data.form,\n      rules: $data.rules,\n      ref: \"registerForm\",\n      onSubmit: _withModifiers($options.handleRegister, [\"prevent\"])\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        prop: \"username\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.form.username,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.username = $event),\n          placeholder: \"用户名\",\n          \"prefix-icon\": \"el-icon-user\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        prop: \"email\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.form.email,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.email = $event),\n          placeholder: \"邮箱\",\n          \"prefix-icon\": \"el-icon-message\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        prop: \"password\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.form.password,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.password = $event),\n          type: \"password\",\n          placeholder: \"密码（至少6位）\",\n          \"prefix-icon\": \"el-icon-lock\",\n          \"show-password\": \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        prop: \"role\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $data.form.role,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.role = $event),\n          placeholder: \"选择角色\",\n          style: {\n            \"width\": \"100%\"\n          }\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"学生\",\n            value: \"student\"\n          }), _createVNode(_component_el_option, {\n            label: \"导师\",\n            value: \"mentor\"\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), $data.form.role === 'student' ? (_openBlock(), _createBlock(_component_el_form_item, {\n        key: 0,\n        prop: \"mentorId\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $data.form.mentorId,\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.form.mentorId = $event),\n          placeholder: \"选择导师\",\n          style: {\n            \"width\": \"100%\"\n          },\n          filterable: \"\"\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.mentors, mentor => {\n            return _openBlock(), _createBlock(_component_el_option, {\n              key: mentor.id,\n              label: mentor.username,\n              value: mentor.id\n            }, null, 8 /* PROPS */, [\"label\", \"value\"]);\n          }), 128 /* KEYED_FRAGMENT */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          \"native-type\": \"submit\",\n          loading: $data.loading,\n          class: \"register-btn\"\n        }, {\n          default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\" 注册 \")])),\n          _: 1 /* STABLE */,\n          __: [5]\n        }, 8 /* PROPS */, [\"loading\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\", \"rules\", \"onSubmit\"]), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_router_link, {\n      to: \"/login\"\n    }, {\n      default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"已有账号？立即登录\")])),\n      _: 1 /* STABLE */,\n      __: [6]\n    })])]),\n    _: 1 /* STABLE */,\n    __: [7]\n  })]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","default","_withCtx","_createElementVNode","_component_el_form","model","$data","form","rules","ref","onSubmit","_withModifiers","$options","handleRegister","_component_el_form_item","prop","_component_el_input","modelValue","username","_cache","$event","placeholder","_","email","password","type","_component_el_select","role","style","_component_el_option","label","value","_createBlock","key","mentorId","filterable","_Fragment","_renderList","mentors","mentor","id","_createCommentVNode","_component_el_button","loading","_createTextVNode","__","_hoisted_2","_component_router_link","to"],"sources":["C:\\Users\\仲佳泽\\Desktop\\大学作业\\软件工程\\moyun-reading-platform\\frontend\\src\\views\\auth\\Register.vue"],"sourcesContent":["<template>\r\n    <div class=\"register-container\">\r\n      <el-card class=\"register-card\">\r\n        <h2>注册新账号</h2>\r\n        <el-form \r\n          :model=\"form\" \r\n          :rules=\"rules\" \r\n          ref=\"registerForm\"\r\n          @submit.prevent=\"handleRegister\"\r\n        >\r\n          <el-form-item prop=\"username\">\r\n            <el-input\r\n              v-model=\"form.username\"\r\n              placeholder=\"用户名\"\r\n              prefix-icon=\"el-icon-user\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item prop=\"email\">\r\n            <el-input\r\n              v-model=\"form.email\"\r\n              placeholder=\"邮箱\"\r\n              prefix-icon=\"el-icon-message\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item prop=\"password\">\r\n            <el-input\r\n              v-model=\"form.password\"\r\n              type=\"password\"\r\n              placeholder=\"密码（至少6位）\"\r\n              prefix-icon=\"el-icon-lock\"\r\n              show-password\r\n            />\r\n          </el-form-item>\r\n          <el-form-item prop=\"role\">\r\n            <el-select \r\n              v-model=\"form.role\" \r\n              placeholder=\"选择角色\"\r\n              style=\"width: 100%\"\r\n            >\r\n              <el-option label=\"学生\" value=\"student\" />\r\n              <el-option label=\"导师\" value=\"mentor\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item \r\n            prop=\"mentorId\"\r\n            v-if=\"form.role === 'student'\"\r\n          >\r\n            <el-select\r\n              v-model=\"form.mentorId\"\r\n              placeholder=\"选择导师\"\r\n              style=\"width: 100%\"\r\n              filterable\r\n            >\r\n              <el-option\r\n                v-for=\"mentor in mentors\"\r\n                :key=\"mentor.id\"\r\n                :label=\"mentor.username\"\r\n                :value=\"mentor.id\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button \r\n              type=\"primary\" \r\n              native-type=\"submit\"\r\n              :loading=\"loading\"\r\n              class=\"register-btn\"\r\n            >\r\n              注册\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div class=\"footer\">\r\n          <router-link to=\"/login\">已有账号？立即登录</router-link>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { mapActions } from 'vuex'\r\n  \r\n  export default {\r\n    name: 'RegisterView',\r\n    data() {\r\n      return {\r\n        form: {\r\n          username: '',\r\n          email: '',\r\n          password: '',\r\n          role: '',\r\n          mentorId: null\r\n        },\r\n        mentors: [],\r\n        rules: {\r\n          username: [\r\n            { required: true, message: '请输入用户名', trigger: 'blur' },\r\n            { min: 3, max: 20, message: '长度在3到20个字符', trigger: 'blur' }\r\n          ],\r\n          email: [\r\n            { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n            { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\r\n          ],\r\n          password: [\r\n            { required: true, message: '请输入密码', trigger: 'blur' },\r\n            { min: 6, message: '密码长度至少6位', trigger: 'blur' }\r\n          ],\r\n          role: [\r\n            { required: true, message: '请选择角色', trigger: 'change' }\r\n          ],\r\n          mentorId: [\r\n            { required: true, message: '请选择导师', trigger: 'change' }\r\n          ]\r\n        },\r\n        loading: false\r\n      }\r\n    },\r\n    async created() {\r\n      await this.loadMentors()\r\n    },\r\n    methods: {\r\n      ...mapActions('auth', ['register']),\r\n      async loadMentors() {\r\n        try {\r\n          const response = await this.$api.users.getAllMentors()\r\n          this.mentors = response.data\r\n        } catch (error) {\r\n          this.$message.error('加载导师列表失败')\r\n        }\r\n      },\r\n      async handleRegister() {\r\n        try {\r\n          this.loading = true\r\n          await this.$refs.registerForm.validate()\r\n          await this.register(this.form)\r\n          this.$message.success('注册成功！')\r\n          this.$router.push('/login')\r\n        } catch (error) {\r\n          this.$message.error(error.message)\r\n        } finally {\r\n          this.loading = false\r\n        }\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .register-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100vh;\r\n    background: #f5f7fa;\r\n  }\r\n  \r\n  .register-card {\r\n    width: 450px;\r\n    padding: 20px;\r\n  }\r\n  \r\n  h2 {\r\n    text-align: center;\r\n    margin-bottom: 30px;\r\n    color: #333;\r\n  }\r\n  \r\n  .register-btn {\r\n    width: 100%;\r\n  }\r\n  \r\n  .footer {\r\n    text-align: center;\r\n    margin-top: 20px;\r\n    font-size: 14px;\r\n  }\r\n  </style>"],"mappings":";;EACSA,KAAK,EAAC;AAAoB;;EAuEtBA,KAAK,EAAC;AAAQ;;;;;;;;;;uBAvEvBC,mBAAA,CA2EM,OA3ENC,UA2EM,GA1EJC,YAAA,CAyEUC,kBAAA;IAzEDJ,KAAK,EAAC;EAAe;IAFpCK,OAAA,EAAAC,QAAA,CAGQ,MAAc,C,0BAAdC,mBAAA,CAAc,YAAV,OAAK,sBACTJ,YAAA,CAmEUK,kBAAA;MAlEPC,KAAK,EAAEC,KAAA,CAAAC,IAAI;MACXC,KAAK,EAAEF,KAAA,CAAAE,KAAK;MACbC,GAAG,EAAC,cAAc;MACjBC,QAAM,EARjBC,cAAA,CAQ2BC,QAAA,CAAAC,cAAc;;MARzCZ,OAAA,EAAAC,QAAA,CAUU,MAMe,CANfH,YAAA,CAMee,uBAAA;QANDC,IAAI,EAAC;MAAU;QAVvCd,OAAA,EAAAC,QAAA,CAWY,MAIE,CAJFH,YAAA,CAIEiB,mBAAA;UAfdC,UAAA,EAYuBX,KAAA,CAAAC,IAAI,CAACW,QAAQ;UAZpC,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAYuBd,KAAA,CAAAC,IAAI,CAACW,QAAQ,GAAAE,MAAA;UACtBC,WAAW,EAAC,KAAK;UACjB,aAAW,EAAC;;QAd1BC,CAAA;UAiBUvB,YAAA,CAMee,uBAAA;QANDC,IAAI,EAAC;MAAO;QAjBpCd,OAAA,EAAAC,QAAA,CAkBY,MAIE,CAJFH,YAAA,CAIEiB,mBAAA;UAtBdC,UAAA,EAmBuBX,KAAA,CAAAC,IAAI,CAACgB,KAAK;UAnBjC,uBAAAJ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAmBuBd,KAAA,CAAAC,IAAI,CAACgB,KAAK,GAAAH,MAAA;UACnBC,WAAW,EAAC,IAAI;UAChB,aAAW,EAAC;;QArB1BC,CAAA;UAwBUvB,YAAA,CAQee,uBAAA;QARDC,IAAI,EAAC;MAAU;QAxBvCd,OAAA,EAAAC,QAAA,CAyBY,MAME,CANFH,YAAA,CAMEiB,mBAAA;UA/BdC,UAAA,EA0BuBX,KAAA,CAAAC,IAAI,CAACiB,QAAQ;UA1BpC,uBAAAL,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA0BuBd,KAAA,CAAAC,IAAI,CAACiB,QAAQ,GAAAJ,MAAA;UACtBK,IAAI,EAAC,UAAU;UACfJ,WAAW,EAAC,UAAU;UACtB,aAAW,EAAC,cAAc;UAC1B,eAAa,EAAb;;QA9BdC,CAAA;UAiCUvB,YAAA,CASee,uBAAA;QATDC,IAAI,EAAC;MAAM;QAjCnCd,OAAA,EAAAC,QAAA,CAkCY,MAOY,CAPZH,YAAA,CAOY2B,oBAAA;UAzCxBT,UAAA,EAmCuBX,KAAA,CAAAC,IAAI,CAACoB,IAAI;UAnChC,uBAAAR,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAmCuBd,KAAA,CAAAC,IAAI,CAACoB,IAAI,GAAAP,MAAA;UAClBC,WAAW,EAAC,MAAM;UAClBO,KAAmB,EAAnB;YAAA;UAAA;;UArCd3B,OAAA,EAAAC,QAAA,CAuCc,MAAwC,CAAxCH,YAAA,CAAwC8B,oBAAA;YAA7BC,KAAK,EAAC,IAAI;YAACC,KAAK,EAAC;cAC5BhC,YAAA,CAAuC8B,oBAAA;YAA5BC,KAAK,EAAC,IAAI;YAACC,KAAK,EAAC;;UAxC1CT,CAAA;;QAAAA,CAAA;UA6CkBhB,KAAA,CAAAC,IAAI,CAACoB,IAAI,kB,cAFjBK,YAAA,CAiBelB,uBAAA;QA5DzBmB,GAAA;QA4CYlB,IAAI,EAAC;;QA5CjBd,OAAA,EAAAC,QAAA,CA+CY,MAYY,CAZZH,YAAA,CAYY2B,oBAAA;UA3DxBT,UAAA,EAgDuBX,KAAA,CAAAC,IAAI,CAAC2B,QAAQ;UAhDpC,uBAAAf,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAgDuBd,KAAA,CAAAC,IAAI,CAAC2B,QAAQ,GAAAd,MAAA;UACtBC,WAAW,EAAC,MAAM;UAClBO,KAAmB,EAAnB;YAAA;UAAA,CAAmB;UACnBO,UAAU,EAAV;;UAnDdlC,OAAA,EAAAC,QAAA,CAsDgB,MAAyB,E,kBAD3BL,mBAAA,CAKEuC,SAAA,QA1DhBC,WAAA,CAsDiC/B,KAAA,CAAAgC,OAAO,EAAjBC,MAAM;iCADfP,YAAA,CAKEH,oBAAA;cAHCI,GAAG,EAAEM,MAAM,CAACC,EAAE;cACdV,KAAK,EAAES,MAAM,CAACrB,QAAQ;cACtBa,KAAK,EAAEQ,MAAM,CAACC;;;UAzD/BlB,CAAA;;QAAAA,CAAA;YAAAmB,mBAAA,gBA6DU1C,YAAA,CASee,uBAAA;QAtEzBb,OAAA,EAAAC,QAAA,CA8DY,MAOY,CAPZH,YAAA,CAOY2C,oBAAA;UANVjB,IAAI,EAAC,SAAS;UACd,aAAW,EAAC,QAAQ;UACnBkB,OAAO,EAAErC,KAAA,CAAAqC,OAAO;UACjB/C,KAAK,EAAC;;UAlEpBK,OAAA,EAAAC,QAAA,CAmEa,MAEDiB,MAAA,QAAAA,MAAA,OArEZyB,gBAAA,CAmEa,MAED,E;UArEZtB,CAAA;UAAAuB,EAAA;;QAAAvB,CAAA;;MAAAA,CAAA;uDAwEQnB,mBAAA,CAEM,OAFN2C,UAEM,GADJ/C,YAAA,CAAgDgD,sBAAA;MAAnCC,EAAE,EAAC;IAAQ;MAzElC/C,OAAA,EAAAC,QAAA,CAyEmC,MAASiB,MAAA,QAAAA,MAAA,OAzE5CyB,gBAAA,CAyEmC,WAAS,E;MAzE5CtB,CAAA;MAAAuB,EAAA;;IAAAvB,CAAA;IAAAuB,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}