{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"profile-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_divider = _resolveComponent(\"el-divider\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[3] || (_cache[3] = _createElementVNode(\"h2\", null, \"个人资料\", -1 /* HOISTED */)), _createVNode(_component_el_divider), _createVNode(_component_el_form, {\n    model: $data.form,\n    rules: $data.rules,\n    ref: \"profileForm\",\n    \"label-width\": \"100px\",\n    onSubmit: _withModifiers($options.handleSubmit, [\"prevent\"])\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"用户名\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.form.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.username = $event),\n        disabled: \"\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"邮箱\",\n      prop: \"email\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.form.email,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.email = $event)\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"角色\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_tag, {\n        type: $options.roleTagType\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($options.roleText), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"type\"])]),\n      _: 1 /* STABLE */\n    }), $data.form.role === 'student' && $data.form.mentor ? (_openBlock(), _createBlock(_component_el_form_item, {\n      key: 0,\n      label: \"导师\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_tag, null, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.form.mentor.username), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        \"native-type\": \"submit\",\n        loading: $data.loading\n      }, {\n        default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\" 保存修改 \")])),\n        _: 1 /* STABLE */,\n        __: [2]\n      }, 8 /* PROPS */, [\"loading\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\", \"onSubmit\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_el_divider","_component_el_form","model","$data","form","rules","ref","onSubmit","_withModifiers","$options","handleSubmit","default","_withCtx","_component_el_form_item","label","_component_el_input","modelValue","username","_cache","$event","disabled","_","prop","email","_component_el_tag","type","roleTagType","_createTextVNode","_toDisplayString","roleText","role","mentor","_createBlock","key","_createCommentVNode","_component_el_button","loading","__"],"sources":["E:\\moyun-reading-platform\\frontend\\src\\views\\profile\\MyProfile.vue"],"sourcesContent":["<template>\r\n    <div class=\"profile-container\">\r\n      <h2>个人资料</h2>\r\n      <el-divider />\r\n      \r\n      <el-form \r\n        :model=\"form\" \r\n        :rules=\"rules\" \r\n        ref=\"profileForm\"\r\n        label-width=\"100px\"\r\n        @submit.native.prevent=\"handleSubmit\"\r\n      >\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"form.username\" disabled />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"form.email\" />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"角色\">\r\n          <el-tag :type=\"roleTagType\">\r\n            {{ roleText }}\r\n          </el-tag>\r\n        </el-form-item>\r\n        \r\n        <el-form-item \r\n          label=\"导师\" \r\n          v-if=\"form.role === 'student' && form.mentor\"\r\n        >\r\n          <el-tag>{{ form.mentor.username }}</el-tag>\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-button \r\n            type=\"primary\" \r\n            native-type=\"submit\"\r\n            :loading=\"loading\"\r\n          >\r\n            保存修改\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { mapState, mapActions } from 'vuex'\r\n  \r\n  export default {\r\n    name: 'MyProfileView',\r\n    data() {\r\n      return {\r\n        form: {\r\n          username: '',\r\n          email: '',\r\n          role: '',\r\n          mentor: null\r\n        },\r\n        rules: {\r\n          email: [\r\n            { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n            { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\r\n          ]\r\n        },\r\n        loading: false\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState('auth', ['user']),\r\n      roleText() {\r\n        const roles = {\r\n          student: '学生',\r\n          mentor: '导师',\r\n          admin: '管理员'\r\n        }\r\n        return roles[this.form.role] || this.form.role\r\n      },\r\n      roleTagType() {\r\n        const types = {\r\n          student: 'success',\r\n          mentor: 'warning',\r\n          admin: 'danger'\r\n        }\r\n        return types[this.form.role] || ''\r\n      }\r\n    },\r\n    created() {\r\n      this.initForm()\r\n    },\r\n    methods: {\r\n      ...mapActions('auth', ['updateProfile']),\r\n      initForm() {\r\n        this.form = {\r\n          username: this.user.username,\r\n          email: this.user.email,\r\n          role: this.user.role,\r\n          mentor: this.user.mentor\r\n        }\r\n      },\r\n      async handleSubmit() {\r\n        try {\r\n          this.loading = true\r\n          await this.$refs.profileForm.validate()\r\n          await this.updateProfile({\r\n            email: this.form.email\r\n          })\r\n          this.$message.success('资料更新成功！')\r\n        } catch (error) {\r\n          this.$message.error(error.message)\r\n        } finally {\r\n          this.loading = false\r\n        }\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .profile-container {\r\n    padding: 20px;\r\n    max-width: 600px;\r\n    margin: 0 auto;\r\n  }\r\n  </style>"],"mappings":";;EACSA,KAAK,EAAC;AAAmB;;;;;;;;uBAA9BC,mBAAA,CA0CM,OA1CNC,UA0CM,G,0BAzCJC,mBAAA,CAAa,YAAT,MAAI,sBACRC,YAAA,CAAcC,qBAAA,GAEdD,YAAA,CAqCUE,kBAAA;IApCPC,KAAK,EAAEC,KAAA,CAAAC,IAAI;IACXC,KAAK,EAAEF,KAAA,CAAAE,KAAK;IACbC,GAAG,EAAC,aAAa;IACjB,aAAW,EAAC,OAAO;IAClBC,QAAM,EAVfC,cAAA,CAUgCC,QAAA,CAAAC,YAAY;;IAV5CC,OAAA,EAAAC,QAAA,CAYQ,MAEe,CAFfb,YAAA,CAEec,uBAAA;MAFDC,KAAK,EAAC;IAAK;MAZjCH,OAAA,EAAAC,QAAA,CAaU,MAA6C,CAA7Cb,YAAA,CAA6CgB,mBAAA;QAbvDC,UAAA,EAa6Bb,KAAA,CAAAC,IAAI,CAACa,QAAQ;QAb1C,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAa6BhB,KAAA,CAAAC,IAAI,CAACa,QAAQ,GAAAE,MAAA;QAAEC,QAAQ,EAAR;;MAb5CC,CAAA;QAgBQtB,YAAA,CAEec,uBAAA;MAFDC,KAAK,EAAC,IAAI;MAACQ,IAAI,EAAC;;MAhBtCX,OAAA,EAAAC,QAAA,CAiBU,MAAiC,CAAjCb,YAAA,CAAiCgB,mBAAA;QAjB3CC,UAAA,EAiB6Bb,KAAA,CAAAC,IAAI,CAACmB,KAAK;QAjBvC,uBAAAL,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAiB6BhB,KAAA,CAAAC,IAAI,CAACmB,KAAK,GAAAJ,MAAA;;MAjBvCE,CAAA;QAoBQtB,YAAA,CAIec,uBAAA;MAJDC,KAAK,EAAC;IAAI;MApBhCH,OAAA,EAAAC,QAAA,CAqBU,MAES,CAFTb,YAAA,CAESyB,iBAAA;QAFAC,IAAI,EAAEhB,QAAA,CAAAiB;MAAW;QArBpCf,OAAA,EAAAC,QAAA,CAsBY,MAAc,CAtB1Be,gBAAA,CAAAC,gBAAA,CAsBenB,QAAA,CAAAoB,QAAQ,iB;QAtBvBR,CAAA;;MAAAA,CAAA;QA4BgBlB,KAAA,CAAAC,IAAI,CAAC0B,IAAI,kBAAkB3B,KAAA,CAAAC,IAAI,CAAC2B,MAAM,I,cAF9CC,YAAA,CAKenB,uBAAA;MA/BvBoB,GAAA;MA2BUnB,KAAK,EAAC;;MA3BhBH,OAAA,EAAAC,QAAA,CA8BU,MAA2C,CAA3Cb,YAAA,CAA2CyB,iBAAA;QA9BrDb,OAAA,EAAAC,QAAA,CA8BkB,MAA0B,CA9B5Ce,gBAAA,CAAAC,gBAAA,CA8BqBzB,KAAA,CAAAC,IAAI,CAAC2B,MAAM,CAACd,QAAQ,iB;QA9BzCI,CAAA;;MAAAA,CAAA;UAAAa,mBAAA,gBAiCQnC,YAAA,CAQec,uBAAA;MAzCvBF,OAAA,EAAAC,QAAA,CAkCU,MAMY,CANZb,YAAA,CAMYoC,oBAAA;QALVV,IAAI,EAAC,SAAS;QACd,aAAW,EAAC,QAAQ;QACnBW,OAAO,EAAEjC,KAAA,CAAAiC;;QArCtBzB,OAAA,EAAAC,QAAA,CAsCW,MAEDM,MAAA,QAAAA,MAAA,OAxCVS,gBAAA,CAsCW,QAED,E;QAxCVN,CAAA;QAAAgB,EAAA;;MAAAhB,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}