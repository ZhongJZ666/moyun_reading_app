{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapState, mapActions } from 'vuex';\nimport PostList from '@/components/PostList.vue';\nimport defaultCover from '@/assets/default-book-cover.jpg';\nexport default {\n  name: 'BookDetailView',\n  components: {\n    PostList\n  },\n  data() {\n    return {\n      defaultCover,\n      bookId: this.$route.params.id\n    };\n  },\n  computed: {\n    ...mapState('books', ['book', 'loading']),\n    ...mapState('posts', ['posts'])\n  },\n  async created() {\n    await Promise.all([this.fetchBookDetail(this.bookId), this.fetchRelatedPosts(this.bookId)]);\n  },\n  methods: {\n    ...mapActions('books', ['fetchBookDetail']),\n    ...mapActions('posts', ['fetchRelatedPosts']),\n    goToCreatePost(bookId) {\n      this.$router.push({\n        path: '/posts/create',\n        query: {\n          bookId\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["mapState","mapActions","PostList","defaultCover","name","components","data","bookId","$route","params","id","computed","created","Promise","all","fetchBookDetail","fetchRelatedPosts","methods","goToCreatePost","$router","push","path","query"],"sources":["C:\\Users\\仲佳泽\\Desktop\\大学作业\\软件工程\\moyun-reading-platform\\frontend\\src\\views\\books\\BookDetail.vue"],"sourcesContent":["<template>\r\n    <div class=\"book-detail-container\" v-loading=\"loading\">\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"6\">\r\n          <div class=\"book-cover\">\r\n            <img :src=\"book.cover_url || defaultCover\" :alt=\"book.title\">\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"18\">\r\n          <div class=\"book-info\">\r\n            <h2>{{ book.title }}</h2>\r\n            <p class=\"author\">作者: {{ book.author }}</p>\r\n            <p class=\"recommender\">推荐人: {{ book.recommender_name }}</p>\r\n            \r\n            <el-divider />\r\n            \r\n            <div class=\"description\">\r\n              <h3>内容简介</h3>\r\n              <p>{{ book.description || '暂无简介' }}</p>\r\n            </div>\r\n            \r\n            <div class=\"actions\">\r\n              <el-button \r\n                type=\"primary\" \r\n                @click=\"goToCreatePost(book.id)\"\r\n              >\r\n                发表读后感\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n      \r\n      <el-divider />\r\n      \r\n      <div class=\"related-posts\">\r\n        <h3>相关读后感</h3>\r\n        <post-list :posts=\"posts\" />\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { mapState, mapActions } from 'vuex'\r\n  import PostList from '@/components/PostList.vue'\r\n  import defaultCover from '@/assets/default-book-cover.jpg'\r\n  \r\n  export default {\r\n    name: 'BookDetailView',\r\n    components: { PostList },\r\n    data() {\r\n      return {\r\n        defaultCover,\r\n        bookId: this.$route.params.id\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState('books', ['book', 'loading']),\r\n      ...mapState('posts', ['posts'])\r\n    },\r\n    async created() {\r\n      await Promise.all([\r\n        this.fetchBookDetail(this.bookId),\r\n        this.fetchRelatedPosts(this.bookId)\r\n      ])\r\n    },\r\n    methods: {\r\n      ...mapActions('books', ['fetchBookDetail']),\r\n      ...mapActions('posts', ['fetchRelatedPosts']),\r\n      goToCreatePost(bookId) {\r\n        this.$router.push({\r\n          path: '/posts/create',\r\n          query: { bookId }\r\n        })\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .book-detail-container {\r\n    padding: 20px;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n  }\r\n  \r\n  .book-cover img {\r\n    width: 100%;\r\n    max-height: 300px;\r\n    object-fit: cover;\r\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .book-info h2 {\r\n    margin-top: 0;\r\n  }\r\n  \r\n  .author, .recommender {\r\n    color: #666;\r\n    margin: 5px 0;\r\n  }\r\n  \r\n  .description {\r\n    margin: 20px 0;\r\n  }\r\n  \r\n  .actions {\r\n    margin-top: 30px;\r\n  }\r\n  \r\n  .related-posts {\r\n    margin-top: 40px;\r\n  }\r\n  </style>"],"mappings":";AA2CE,SAASA,QAAQ,EAAEC,UAAS,QAAS,MAAK;AAC1C,OAAOC,QAAO,MAAO,2BAA0B;AAC/C,OAAOC,YAAW,MAAO,iCAAgC;AAEzD,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,UAAU,EAAE;IAAEH;EAAS,CAAC;EACxBI,IAAIA,CAAA,EAAG;IACL,OAAO;MACLH,YAAY;MACZI,MAAM,EAAE,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC;IAC7B;EACF,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGX,QAAQ,CAAC,OAAO,EAAE,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IACzC,GAAGA,QAAQ,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC;EAChC,CAAC;EACD,MAAMY,OAAOA,CAAA,EAAG;IACd,MAAMC,OAAO,CAACC,GAAG,CAAC,CAChB,IAAI,CAACC,eAAe,CAAC,IAAI,CAACR,MAAM,CAAC,EACjC,IAAI,CAACS,iBAAiB,CAAC,IAAI,CAACT,MAAM,EACnC;EACH,CAAC;EACDU,OAAO,EAAE;IACP,GAAGhB,UAAU,CAAC,OAAO,EAAE,CAAC,iBAAiB,CAAC,CAAC;IAC3C,GAAGA,UAAU,CAAC,OAAO,EAAE,CAAC,mBAAmB,CAAC,CAAC;IAC7CiB,cAAcA,CAACX,MAAM,EAAE;MACrB,IAAI,CAACY,OAAO,CAACC,IAAI,CAAC;QAChBC,IAAI,EAAE,eAAe;QACrBC,KAAK,EAAE;UAAEf;QAAO;MAClB,CAAC;IACH;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}