{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport userBooksApi from '@/api/userBooks';\nimport BookAPI from '@/api/books';\nexport default {\n  name: 'MyBooks',\n  data() {\n    return {\n      books: []\n    };\n  },\n  async created() {\n    await this.fetchMyBooks();\n  },\n  methods: {\n    async fetchMyBooks() {\n      const userBooks = await userBooksApi.getBooks();\n      const allBooks = await BookAPI.getAll();\n      this.books = allBooks.items.filter(b => userBooks.some(ub => ub.book_id === b.id));\n    },\n    async remove(bookId) {\n      await userBooksApi.removeBook(bookId);\n      this.$message.success('已移除');\n      await this.fetchMyBooks();\n    }\n  }\n};","map":{"version":3,"names":["userBooksApi","BookAPI","name","data","books","created","fetchMyBooks","methods","userBooks","getBooks","allBooks","getAll","items","filter","b","some","ub","book_id","id","remove","bookId","removeBook","$message","success"],"sources":["E:\\moyun-reading-platform\\frontend\\src\\views\\books\\MyBooks.vue"],"sourcesContent":["<template>\r\n  <div class=\"my-books-container\">\r\n    <h2>我的书库</h2>\r\n    <el-divider />\r\n    <div v-if=\"books.length === 0\">\r\n      <el-empty description=\"暂无已添加的书籍\" />\r\n    </div>\r\n    <div v-else class=\"book-list\">\r\n      <el-card v-for=\"book in books\" :key=\"book.id\" class=\"book-card\">\r\n        <img :src=\"'/' + book.cover_url\" class=\"cover\" />\r\n        <div class=\"info\">\r\n          <h3>{{ book.title }}</h3>\r\n          <p>{{ book.author }}</p>\r\n          <el-button type=\"danger\" size=\"mini\" @click=\"remove(book.id)\">移除</el-button>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport userBooksApi from '@/api/userBooks'\r\nimport BookAPI from '@/api/books'\r\n\r\nexport default {\r\n  name: 'MyBooks',\r\n  data() {\r\n    return {\r\n      books: []\r\n    }\r\n  },\r\n  async created() {\r\n    await this.fetchMyBooks()\r\n  },\r\n  methods: {\r\n    async fetchMyBooks() {\r\n      const userBooks = await userBooksApi.getBooks()\r\n      const allBooks = await BookAPI.getAll()\r\n      this.books = allBooks.items.filter(b => userBooks.some(ub => ub.book_id === b.id))\r\n    },\r\n    async remove(bookId) {\r\n      await userBooksApi.removeBook(bookId)\r\n      this.$message.success('已移除')\r\n      await this.fetchMyBooks()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.my-books-container {\r\n  max-width: 900px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n.book-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 20px;\r\n}\r\n.book-card {\r\n  width: 200px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.cover {\r\n  width: 100px;\r\n  height: 140px;\r\n  object-fit: cover;\r\n  margin-bottom: 10px;\r\n}\r\n.info {\r\n  text-align: center;\r\n}\r\n</style> "],"mappings":";;;AAqBA,OAAOA,YAAW,MAAO,iBAAgB;AACzC,OAAOC,OAAM,MAAO,aAAY;AAEhC,eAAe;EACbC,IAAI,EAAE,SAAS;EACfC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE;IACT;EACF,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACC,YAAY,CAAC;EAC1B,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,YAAYA,CAAA,EAAG;MACnB,MAAME,SAAQ,GAAI,MAAMR,YAAY,CAACS,QAAQ,CAAC;MAC9C,MAAMC,QAAO,GAAI,MAAMT,OAAO,CAACU,MAAM,CAAC;MACtC,IAAI,CAACP,KAAI,GAAIM,QAAQ,CAACE,KAAK,CAACC,MAAM,CAACC,CAAA,IAAKN,SAAS,CAACO,IAAI,CAACC,EAAC,IAAKA,EAAE,CAACC,OAAM,KAAMH,CAAC,CAACI,EAAE,CAAC;IACnF,CAAC;IACD,MAAMC,MAAMA,CAACC,MAAM,EAAE;MACnB,MAAMpB,YAAY,CAACqB,UAAU,CAACD,MAAM;MACpC,IAAI,CAACE,QAAQ,CAACC,OAAO,CAAC,KAAK;MAC3B,MAAM,IAAI,CAACjB,YAAY,CAAC;IAC1B;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}