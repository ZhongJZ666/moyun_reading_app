{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport CircleAPI from '@/api/circles';\nconst state = {\n  currentCircle: null,\n  members: [],\n  loading: false,\n  error: null,\n  allCircles: [],\n  students: []\n};\nconst mutations = {\n  SET_CIRCLE(state, circle) {\n    state.currentCircle = circle;\n  },\n  SET_MEMBERS(state, members) {\n    state.members = members;\n  },\n  ADD_MEMBER(state, member) {\n    state.members.push(member);\n  },\n  SET_LOADING(state, isLoading) {\n    state.loading = isLoading;\n  },\n  SET_ERROR(state, error) {\n    state.error = error;\n  },\n  SET_ALL_CIRCLES(state, circles) {\n    state.allCircles = circles;\n  },\n  SET_STUDENTS(state, students) {\n    state.students = students;\n  }\n};\nconst actions = {\n  // 获取我的圈子\n  async fetchMyCircle({\n    commit\n  }) {\n    commit('SET_LOADING', true);\n    try {\n      const circle = await CircleAPI.getMyCircle();\n      commit('SET_CIRCLE', circle);\n\n      // 获取成员列表\n      const members = await CircleAPI.getMembers(circle.id);\n      commit('SET_MEMBERS', members);\n      commit('SET_ERROR', null);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  // 添加成员\n  async addMember({\n    commit\n  }, {\n    circleId,\n    userId\n  }) {\n    commit('SET_LOADING', true);\n    try {\n      await CircleAPI.addMember(circleId, userId);\n      const members = await CircleAPI.getMembers(circleId);\n      commit('SET_MEMBERS', members);\n      commit('SET_ERROR', null);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  // 获取所有圈子\n  async fetchAllCircles({\n    commit\n  }) {\n    commit('SET_LOADING', true);\n    try {\n      const circles = await CircleAPI.getAll();\n      commit('SET_ALL_CIRCLES', circles);\n      commit('SET_ERROR', null);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  // 通过 mentorId 获取学生列表\n  async fetchStudentsByMentorId({\n    commit,\n    rootState\n  }) {\n    commit('SET_LOADING', true);\n    try {\n      const mentorId = rootState.auth.user.id;\n      const students = await require('@/api/users').default.getStudents(mentorId);\n      commit('SET_STUDENTS', students);\n      commit('SET_ERROR', null);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  }\n};\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters: {\n    studentsCount: state => state.students.length\n  }\n};","map":{"version":3,"names":["CircleAPI","state","currentCircle","members","loading","error","allCircles","students","mutations","SET_CIRCLE","circle","SET_MEMBERS","ADD_MEMBER","member","push","SET_LOADING","isLoading","SET_ERROR","SET_ALL_CIRCLES","circles","SET_STUDENTS","actions","fetchMyCircle","commit","getMyCircle","getMembers","id","message","addMember","circleId","userId","fetchAllCircles","getAll","fetchStudentsByMentorId","rootState","mentorId","auth","user","require","default","getStudents","namespaced","getters","studentsCount","length"],"sources":["E:/moyun-reading-platform/moyun-reading-platform/frontend/src/store/modules/circles.js"],"sourcesContent":["import CircleAPI from '@/api/circles'\r\n\r\nconst state = {\r\n  currentCircle: null,\r\n  members: [],\r\n  loading: false,\r\n  error: null,\r\n  allCircles: [],\r\n  students: []\r\n}\r\n\r\nconst mutations = {\r\n  SET_CIRCLE(state, circle) {\r\n    state.currentCircle = circle\r\n  },\r\n  SET_MEMBERS(state, members) {\r\n    state.members = members\r\n  },\r\n  ADD_MEMBER(state, member) {\r\n    state.members.push(member)\r\n  },\r\n  SET_LOADING(state, isLoading) {\r\n    state.loading = isLoading\r\n  },\r\n  SET_ERROR(state, error) {\r\n    state.error = error\r\n  },\r\n  SET_ALL_CIRCLES(state, circles) {\r\n    state.allCircles = circles\r\n  },\r\n  SET_STUDENTS(state, students) {\r\n    state.students = students\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // 获取我的圈子\r\n  async fetchMyCircle({ commit }) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const circle = await CircleAPI.getMyCircle()\r\n      commit('SET_CIRCLE', circle)\r\n      \r\n      // 获取成员列表\r\n      const members = await CircleAPI.getMembers(circle.id)\r\n      commit('SET_MEMBERS', members)\r\n      \r\n      commit('SET_ERROR', null)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  // 添加成员\r\n  async addMember({ commit }, { circleId, userId }) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      await CircleAPI.addMember(circleId, userId)\r\n      const members = await CircleAPI.getMembers(circleId)\r\n      commit('SET_MEMBERS', members)\r\n      commit('SET_ERROR', null)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n      throw error\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  // 获取所有圈子\r\n  async fetchAllCircles({ commit }) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const circles = await CircleAPI.getAll()\r\n      commit('SET_ALL_CIRCLES', circles)\r\n      commit('SET_ERROR', null)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  // 通过 mentorId 获取学生列表\r\n  async fetchStudentsByMentorId({ commit, rootState }) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const mentorId = rootState.auth.user.id\r\n      const students = await require('@/api/users').default.getStudents(mentorId)\r\n      commit('SET_STUDENTS', students)\r\n      commit('SET_ERROR', null)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions,\r\n  getters: {\r\n    studentsCount: (state) => state.students.length\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}