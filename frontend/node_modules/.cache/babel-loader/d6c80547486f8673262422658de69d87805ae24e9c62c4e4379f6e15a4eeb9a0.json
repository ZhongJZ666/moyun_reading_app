{"ast":null,"code":"import axios from 'axios';\nimport { getAuthHeader } from './utils';\nconst API_URL = process.env.VUE_APP_API_BASE_URL + '/posts';\nclass PostAPI {\n  // 创建帖子\n  static async create({\n    title,\n    content,\n    circleId,\n    bookId\n  }) {\n    try {\n      const response = await axios.post(API_URL, {\n        title,\n        content,\n        circle_id: circleId,\n        book_id: bookId\n      }, {\n        headers: getAuthHeader()\n      });\n      return response.data;\n    } catch (error) {\n      throw this._handleError(error);\n    }\n  }\n\n  // 获取圈子帖子列表\n  static async getByCircle(circleId) {\n    try {\n      const response = await axios.get(`${API_URL}/circle/${circleId}`, {\n        headers: getAuthHeader()\n      });\n      return response.data;\n    } catch (error) {\n      throw this._handleError(error);\n    }\n  }\n\n  // 获取帖子详情\n  static async getDetail(postId) {\n    try {\n      const response = await axios.get(`${API_URL}/${postId}`, {\n        headers: getAuthHeader()\n      });\n      return response.data;\n    } catch (error) {\n      throw this._handleError(error);\n    }\n  }\n\n  // 获取某本书的相关帖子\n  static async getByBook(bookId) {\n    try {\n      const response = await axios.get(`${API_URL}/book/${bookId}`, {\n        headers: getAuthHeader()\n      });\n      return response.data;\n    } catch (error) {\n      throw this._handleError(error);\n    }\n  }\n}\nexport default PostAPI;","map":{"version":3,"names":["axios","getAuthHeader","API_URL","process","env","VUE_APP_API_BASE_URL","PostAPI","create","title","content","circleId","bookId","response","post","circle_id","book_id","headers","data","error","_handleError","getByCircle","get","getDetail","postId","getByBook"],"sources":["C:/Users/仲佳泽/Desktop/大学作业/软件工程/moyun-reading-platform/frontend/src/api/posts.js"],"sourcesContent":["import axios from 'axios';\r\nimport { getAuthHeader } from './utils';\r\n\r\nconst API_URL = process.env.VUE_APP_API_BASE_URL + '/posts';\r\n\r\nclass PostAPI {\r\n  // 创建帖子\r\n  static async create({ title, content, circleId, bookId }) {\r\n    try {\r\n      const response = await axios.post(\r\n        API_URL,\r\n        { title, content, circle_id: circleId, book_id: bookId },\r\n        { headers: getAuthHeader() }\r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this._handleError(error);\r\n    }\r\n  }\r\n\r\n  // 获取圈子帖子列表\r\n  static async getByCircle(circleId) {\r\n    try {\r\n      const response = await axios.get(`${API_URL}/circle/${circleId}`, {\r\n        headers: getAuthHeader()\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this._handleError(error);\r\n    }\r\n  }\r\n\r\n  // 获取帖子详情\r\n  static async getDetail(postId) {\r\n    try {\r\n      const response = await axios.get(`${API_URL}/${postId}`, {\r\n        headers: getAuthHeader()\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this._handleError(error);\r\n    }\r\n  }\r\n\r\n  // 获取某本书的相关帖子\r\n  static async getByBook(bookId) {\r\n    try {\r\n      const response = await axios.get(`${API_URL}/book/${bookId}`, {\r\n        headers: getAuthHeader()\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      throw this._handleError(error);\r\n    }\r\n  }\r\n}\r\n\r\nexport default PostAPI;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,aAAa,QAAQ,SAAS;AAEvC,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB,GAAG,QAAQ;AAE3D,MAAMC,OAAO,CAAC;EACZ;EACA,aAAaC,MAAMA,CAAC;IAAEC,KAAK;IAAEC,OAAO;IAAEC,QAAQ;IAAEC;EAAO,CAAC,EAAE;IACxD,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMZ,KAAK,CAACa,IAAI,CAC/BX,OAAO,EACP;QAAEM,KAAK;QAAEC,OAAO;QAAEK,SAAS,EAAEJ,QAAQ;QAAEK,OAAO,EAAEJ;MAAO,CAAC,EACxD;QAAEK,OAAO,EAAEf,aAAa,CAAC;MAAE,CAC7B,CAAC;MACD,OAAOW,QAAQ,CAACK,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd,MAAM,IAAI,CAACC,YAAY,CAACD,KAAK,CAAC;IAChC;EACF;;EAEA;EACA,aAAaE,WAAWA,CAACV,QAAQ,EAAE;IACjC,IAAI;MACF,MAAME,QAAQ,GAAG,MAAMZ,KAAK,CAACqB,GAAG,CAAC,GAAGnB,OAAO,WAAWQ,QAAQ,EAAE,EAAE;QAChEM,OAAO,EAAEf,aAAa,CAAC;MACzB,CAAC,CAAC;MACF,OAAOW,QAAQ,CAACK,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd,MAAM,IAAI,CAACC,YAAY,CAACD,KAAK,CAAC;IAChC;EACF;;EAEA;EACA,aAAaI,SAASA,CAACC,MAAM,EAAE;IAC7B,IAAI;MACF,MAAMX,QAAQ,GAAG,MAAMZ,KAAK,CAACqB,GAAG,CAAC,GAAGnB,OAAO,IAAIqB,MAAM,EAAE,EAAE;QACvDP,OAAO,EAAEf,aAAa,CAAC;MACzB,CAAC,CAAC;MACF,OAAOW,QAAQ,CAACK,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd,MAAM,IAAI,CAACC,YAAY,CAACD,KAAK,CAAC;IAChC;EACF;;EAEA;EACA,aAAaM,SAASA,CAACb,MAAM,EAAE;IAC7B,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMZ,KAAK,CAACqB,GAAG,CAAC,GAAGnB,OAAO,SAASS,MAAM,EAAE,EAAE;QAC5DK,OAAO,EAAEf,aAAa,CAAC;MACzB,CAAC,CAAC;MACF,OAAOW,QAAQ,CAACK,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd,MAAM,IAAI,CAACC,YAAY,CAACD,KAAK,CAAC;IAChC;EACF;AACF;AAEA,eAAeZ,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}