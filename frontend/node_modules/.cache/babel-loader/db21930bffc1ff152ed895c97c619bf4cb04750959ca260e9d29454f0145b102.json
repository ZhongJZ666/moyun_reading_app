{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapState, mapActions } from 'vuex';\nimport PostList from '@/components/PostList.vue';\nimport defaultCover from '@/assets/default-book-cover.jpg';\nexport default {\n  name: 'BookDetailView',\n  components: {\n    PostList\n  },\n  data() {\n    return {\n      defaultCover,\n      bookId: this.$route.params.id\n    };\n  },\n  computed: {\n    ...mapState('books', ['currentBook', 'loading', 'error']),\n    ...mapState('posts', ['posts']),\n    book() {\n      return this.currentBook;\n    }\n  },\n  async created() {\n    try {\n      await Promise.all([this.fetchBookDetail(this.bookId), this.fetchRelatedPosts(this.bookId)]);\n    } catch (error) {\n      console.error('获取书籍详情失败:', error);\n    }\n  },\n  methods: {\n    ...mapActions('books', ['fetchBookDetail']),\n    ...mapActions('posts', ['fetchRelatedPosts']),\n    goToCreatePost(bookId) {\n      if (bookId) {\n        this.$router.push({\n          path: '/posts/create',\n          query: {\n            bookId\n          }\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapState","mapActions","PostList","defaultCover","name","components","data","bookId","$route","params","id","computed","book","currentBook","created","Promise","all","fetchBookDetail","fetchRelatedPosts","error","console","methods","goToCreatePost","$router","push","path","query"],"sources":["C:\\Users\\仲佳泽\\Desktop\\大学作业\\软件工程\\moyun-reading-platform\\frontend\\src\\views\\books\\BookDetail.vue"],"sourcesContent":["<template>\r\n    <div class=\"book-detail-container\" v-loading=\"loading\">\r\n      <template v-if=\"error\">\r\n        <el-alert\r\n          :title=\"error\"\r\n          type=\"error\"\r\n          show-icon\r\n          :closable=\"false\"\r\n        />\r\n      </template>\r\n      <template v-else-if=\"book\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"6\">\r\n            <div class=\"book-cover\">\r\n              <img :src=\"book?.cover_url || defaultCover\" :alt=\"book?.title || '书籍封面'\">\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"18\">\r\n            <div class=\"book-info\">\r\n              <h2>{{ book?.title || '未知书名' }}</h2>\r\n              <p class=\"author\">作者: {{ book?.author || '未知作者' }}</p>\r\n              <p class=\"recommender\">推荐人: {{ book?.recommender_name || '未知推荐人' }}</p>\r\n              \r\n              <el-divider />\r\n              \r\n              <div class=\"description\">\r\n                <h3>内容简介</h3>\r\n                <p>{{ book?.description || '暂无简介' }}</p>\r\n              </div>\r\n              \r\n              <div class=\"actions\">\r\n                <el-button \r\n                  type=\"primary\" \r\n                  @click=\"goToCreatePost(book.id)\"\r\n                >\r\n                  发表读后感\r\n                </el-button>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n        \r\n        <el-divider />\r\n        \r\n        <div class=\"related-posts\">\r\n          <h3>相关读后感</h3>\r\n          <post-list :posts=\"posts\" />\r\n        </div>\r\n      </template>\r\n      <template v-else>\r\n        <el-empty description=\"未找到书籍信息\" />\r\n      </template>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { mapState, mapActions } from 'vuex'\r\n  import PostList from '@/components/PostList.vue'\r\n  import defaultCover from '@/assets/default-book-cover.jpg'\r\n  \r\n  export default {\r\n    name: 'BookDetailView',\r\n    components: { PostList },\r\n    data() {\r\n      return {\r\n        defaultCover,\r\n        bookId: this.$route.params.id\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState('books', ['currentBook', 'loading', 'error']),\r\n      ...mapState('posts', ['posts']),\r\n      book() {\r\n        return this.currentBook\r\n      }\r\n    },\r\n    async created() {\r\n      try {\r\n        await Promise.all([\r\n          this.fetchBookDetail(this.bookId),\r\n          this.fetchRelatedPosts(this.bookId)\r\n        ])\r\n      } catch (error) {\r\n        console.error('获取书籍详情失败:', error)\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapActions('books', ['fetchBookDetail']),\r\n      ...mapActions('posts', ['fetchRelatedPosts']),\r\n      goToCreatePost(bookId) {\r\n        if (bookId) {\r\n          this.$router.push({\r\n            path: '/posts/create',\r\n            query: { bookId }\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .book-detail-container {\r\n    padding: 20px;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n  }\r\n  \r\n  .book-cover img {\r\n    width: 100%;\r\n    max-height: 300px;\r\n    object-fit: cover;\r\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .book-info h2 {\r\n    margin-top: 0;\r\n  }\r\n  \r\n  .author, .recommender {\r\n    color: #666;\r\n    margin: 5px 0;\r\n  }\r\n  \r\n  .description {\r\n    margin: 20px 0;\r\n  }\r\n  \r\n  .actions {\r\n    margin-top: 30px;\r\n  }\r\n  \r\n  .related-posts {\r\n    margin-top: 40px;\r\n  }\r\n  </style>"],"mappings":";AAwDE,SAASA,QAAQ,EAAEC,UAAS,QAAS,MAAK;AAC1C,OAAOC,QAAO,MAAO,2BAA0B;AAC/C,OAAOC,YAAW,MAAO,iCAAgC;AAEzD,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,UAAU,EAAE;IAAEH;EAAS,CAAC;EACxBI,IAAIA,CAAA,EAAG;IACL,OAAO;MACLH,YAAY;MACZI,MAAM,EAAE,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC;IAC7B;EACF,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGX,QAAQ,CAAC,OAAO,EAAE,CAAC,aAAa,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;IACzD,GAAGA,QAAQ,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,CAAC;IAC/BY,IAAIA,CAAA,EAAG;MACL,OAAO,IAAI,CAACC,WAAU;IACxB;EACF,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,IAAI;MACF,MAAMC,OAAO,CAACC,GAAG,CAAC,CAChB,IAAI,CAACC,eAAe,CAAC,IAAI,CAACV,MAAM,CAAC,EACjC,IAAI,CAACW,iBAAiB,CAAC,IAAI,CAACX,MAAM,EACnC;IACH,EAAE,OAAOY,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK;IAClC;EACF,CAAC;EACDE,OAAO,EAAE;IACP,GAAGpB,UAAU,CAAC,OAAO,EAAE,CAAC,iBAAiB,CAAC,CAAC;IAC3C,GAAGA,UAAU,CAAC,OAAO,EAAE,CAAC,mBAAmB,CAAC,CAAC;IAC7CqB,cAAcA,CAACf,MAAM,EAAE;MACrB,IAAIA,MAAM,EAAE;QACV,IAAI,CAACgB,OAAO,CAACC,IAAI,CAAC;UAChBC,IAAI,EAAE,eAAe;UACrBC,KAAK,EAAE;YAAEnB;UAAO;QAClB,CAAC;MACH;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}