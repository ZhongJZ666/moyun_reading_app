{"ast":null,"code":"import store from '@/store';\n\n// 获取认证头\nexport function getAuthHeader() {\n  const token = localStorage.getItem('token');\n  return token ? {\n    Authorization: `Bearer ${token}`\n  } : {};\n}\n\n// 设置认证数据\nexport function setAuthData(token) {\n  localStorage.setItem('token', token);\n}\n\n// 清除认证数据\nexport function clearAuthData() {\n  localStorage.removeItem('token');\n  localStorage.removeItem('user');\n}\n\n// 统一错误处理\nexport function handleAPIError(error) {\n  if (error.response) {\n    switch (error.response.status) {\n      case 401:\n        clearAuthData();\n        return '登录已过期，请重新登录';\n      case 403:\n        return '无权执行此操作';\n      case 404:\n        return '资源不存在';\n      default:\n        return error.response.data.message || '请求失败';\n    }\n  }\n  return '网络连接异常，请稍后重试';\n}","map":{"version":3,"names":["store","getAuthHeader","token","localStorage","getItem","Authorization","setAuthData","setItem","clearAuthData","removeItem","handleAPIError","error","response","status","data","message"],"sources":["E:/moyun-reading-platform/frontend/src/api/utils.js"],"sourcesContent":["import store from '@/store';\r\n\r\n// 获取认证头\r\nexport function getAuthHeader() {\r\n  const token = localStorage.getItem('token');\r\n  return token ? { Authorization: `Bearer ${token}` } : {};\r\n}\r\n\r\n// 设置认证数据\r\nexport function setAuthData(token) {\r\n  localStorage.setItem('token', token);\r\n}\r\n\r\n// 清除认证数据\r\nexport function clearAuthData() {\r\n  localStorage.removeItem('token');\r\n  localStorage.removeItem('user');\r\n}\r\n\r\n// 统一错误处理\r\nexport function handleAPIError(error) {\r\n  if (error.response) {\r\n    switch (error.response.status) {\r\n      case 401:\r\n        clearAuthData();\r\n        return '登录已过期，请重新登录';\r\n      case 403:\r\n        return '无权执行此操作';\r\n      case 404:\r\n        return '资源不存在';\r\n      default:\r\n        return error.response.data.message || '请求失败';\r\n    }\r\n  }\r\n  return '网络连接异常，请稍后重试';\r\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,SAAS;;AAE3B;AACA,OAAO,SAASC,aAAaA,CAAA,EAAG;EAC9B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,OAAOF,KAAK,GAAG;IAAEG,aAAa,EAAE,UAAUH,KAAK;EAAG,CAAC,GAAG,CAAC,CAAC;AAC1D;;AAEA;AACA,OAAO,SAASI,WAAWA,CAACJ,KAAK,EAAE;EACjCC,YAAY,CAACI,OAAO,CAAC,OAAO,EAAEL,KAAK,CAAC;AACtC;;AAEA;AACA,OAAO,SAASM,aAAaA,CAAA,EAAG;EAC9BL,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC;EAChCN,YAAY,CAACM,UAAU,CAAC,MAAM,CAAC;AACjC;;AAEA;AACA,OAAO,SAASC,cAAcA,CAACC,KAAK,EAAE;EACpC,IAAIA,KAAK,CAACC,QAAQ,EAAE;IAClB,QAAQD,KAAK,CAACC,QAAQ,CAACC,MAAM;MAC3B,KAAK,GAAG;QACNL,aAAa,CAAC,CAAC;QACf,OAAO,aAAa;MACtB,KAAK,GAAG;QACN,OAAO,SAAS;MAClB,KAAK,GAAG;QACN,OAAO,OAAO;MAChB;QACE,OAAOG,KAAK,CAACC,QAAQ,CAACE,IAAI,CAACC,OAAO,IAAI,MAAM;IAChD;EACF;EACA,OAAO,cAAc;AACvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}