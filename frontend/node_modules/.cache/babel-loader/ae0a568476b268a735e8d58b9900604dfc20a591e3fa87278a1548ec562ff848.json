{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"card-header\"\n};\nconst _hoisted_2 = {\n  class: \"calendar-content\"\n};\nconst _hoisted_3 = {\n  class: \"calendar-header\"\n};\nconst _hoisted_4 = {\n  class: \"calendar-body\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n  class: \"day-number\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"event-dot\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ArrowLeft = _resolveComponent(\"ArrowLeft\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_ArrowRight = _resolveComponent(\"ArrowRight\");\n  const _component_el_button_group = _resolveComponent(\"el-button-group\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createBlock(_component_el_card, {\n    class: \"calendar-widget\"\n  }, {\n    header: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"span\", null, \"日历\", -1 /* HOISTED */)), _createVNode(_component_el_button_group, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        size: \"small\",\n        onClick: $options.handlePrevMonth\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_ArrowLeft)]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n        size: \"small\",\n        onClick: $options.handleNextMonth\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_ArrowRight)]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })])]),\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.weekDays, day => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: day,\n        class: \"week-day\"\n      }, _toDisplayString(day), 1 /* TEXT */);\n    }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.calendarDays, (day, index) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: index,\n        class: _normalizeClass([\"calendar-day\", {\n          'other-month': !day.currentMonth,\n          'today': day.isToday,\n          'has-event': day.hasEvent\n        }]),\n        onClick: $event => $options.handleDayClick(day)\n      }, [_createElementVNode(\"span\", _hoisted_6, _toDisplayString(day.date.getDate()), 1 /* TEXT */), day.hasEvent ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7)) : _createCommentVNode(\"v-if\", true)], 10 /* CLASS, PROPS */, _hoisted_5);\n    }), 128 /* KEYED_FRAGMENT */))])])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","key","_createBlock","_component_el_card","header","_withCtx","_createElementVNode","_hoisted_1","_createVNode","_component_el_button_group","default","_component_el_button","size","onClick","$options","handlePrevMonth","_component_el_icon","_component_ArrowLeft","_","handleNextMonth","_component_ArrowRight","_hoisted_2","_hoisted_3","_createElementBlock","_Fragment","_renderList","$data","weekDays","day","_hoisted_4","calendarDays","index","_normalizeClass","currentMonth","isToday","hasEvent","$event","handleDayClick","_hoisted_6","_toDisplayString","date","getDate","_hoisted_7","_createCommentVNode","_hoisted_5"],"sources":["E:\\moyun-reading-platform\\moyun-reading-platform\\frontend\\src\\components\\home\\CalendarWidget.vue"],"sourcesContent":["<template>\r\n  <el-card class=\"calendar-widget\">\r\n    <template #header>\r\n      <div class=\"card-header\">\r\n        <span>日历</span>\r\n        <el-button-group>\r\n          <el-button size=\"small\" @click=\"handlePrevMonth\">\r\n            <el-icon><ArrowLeft /></el-icon>\r\n          </el-button>\r\n          <el-button size=\"small\" @click=\"handleNextMonth\">\r\n            <el-icon><ArrowRight /></el-icon>\r\n          </el-button>\r\n        </el-button-group>\r\n      </div>\r\n    </template>\r\n    <div class=\"calendar-content\">\r\n      <div class=\"calendar-header\">\r\n        <div v-for=\"day in weekDays\" :key=\"day\" class=\"week-day\">\r\n          {{ day }}\r\n        </div>\r\n      </div>\r\n      <div class=\"calendar-body\">\r\n        <div\r\n          v-for=\"(day, index) in calendarDays\"\r\n          :key=\"index\"\r\n          class=\"calendar-day\"\r\n          :class=\"{\r\n            'other-month': !day.currentMonth,\r\n            'today': day.isToday,\r\n            'has-event': day.hasEvent\r\n          }\"\r\n          @click=\"handleDayClick(day)\"\r\n        >\r\n          <span class=\"day-number\">{{ day.date.getDate() }}</span>\r\n          <div v-if=\"day.hasEvent\" class=\"event-dot\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport { ArrowLeft, ArrowRight } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'CalendarWidget',\r\n  components: {\r\n    ArrowLeft,\r\n    ArrowRight\r\n  },\r\n  data() {\r\n    return {\r\n      weekDays: ['日', '一', '二', '三', '四', '五', '六'],\r\n      currentDate: new Date(),\r\n      events: []\r\n    }\r\n  },\r\n  computed: {\r\n    calendarDays() {\r\n      const year = this.currentDate.getFullYear()\r\n      const month = this.currentDate.getMonth()\r\n      const firstDay = new Date(year, month, 1)\r\n      const lastDay = new Date(year, month + 1, 0)\r\n      const days = []\r\n\r\n      // 填充上个月的日期\r\n      const firstDayWeek = firstDay.getDay()\r\n      for (let i = firstDayWeek - 1; i >= 0; i--) {\r\n        const date = new Date(year, month, -i)\r\n        days.push({\r\n          date,\r\n          currentMonth: false,\r\n          isToday: this.isToday(date),\r\n          hasEvent: this.hasEvent(date)\r\n        })\r\n      }\r\n\r\n      // 填充当前月的日期\r\n      for (let i = 1; i <= lastDay.getDate(); i++) {\r\n        const date = new Date(year, month, i)\r\n        days.push({\r\n          date,\r\n          currentMonth: true,\r\n          isToday: this.isToday(date),\r\n          hasEvent: this.hasEvent(date)\r\n        })\r\n      }\r\n\r\n      // 填充下个月的日期\r\n      const remainingDays = 42 - days.length\r\n      for (let i = 1; i <= remainingDays; i++) {\r\n        const date = new Date(year, month + 1, i)\r\n        days.push({\r\n          date,\r\n          currentMonth: false,\r\n          isToday: this.isToday(date),\r\n          hasEvent: this.hasEvent(date)\r\n        })\r\n      }\r\n\r\n      return days\r\n    }\r\n  },\r\n  methods: {\r\n    isToday(date) {\r\n      const today = new Date()\r\n      return (\r\n        date.getDate() === today.getDate() &&\r\n        date.getMonth() === today.getMonth() &&\r\n        date.getFullYear() === today.getFullYear()\r\n      )\r\n    },\r\n    hasEvent(date) {\r\n      return this.events.some(event => {\r\n        const eventDate = new Date(event.date)\r\n        return (\r\n          eventDate.getDate() === date.getDate() &&\r\n          eventDate.getMonth() === date.getMonth() &&\r\n          eventDate.getFullYear() === date.getFullYear()\r\n        )\r\n      })\r\n    },\r\n    handlePrevMonth() {\r\n      this.currentDate = new Date(\r\n        this.currentDate.getFullYear(),\r\n        this.currentDate.getMonth() - 1,\r\n        1\r\n      )\r\n    },\r\n    handleNextMonth() {\r\n      this.currentDate = new Date(\r\n        this.currentDate.getFullYear(),\r\n        this.currentDate.getMonth() + 1,\r\n        1\r\n      )\r\n    },\r\n    handleDayClick(day) {\r\n      this.$emit('day-click', day)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.calendar-widget {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.calendar-content {\r\n  padding: 10px 0;\r\n}\r\n\r\n.calendar-header {\r\n  display: grid;\r\n  grid-template-columns: repeat(7, 1fr);\r\n  text-align: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.week-day {\r\n  font-weight: bold;\r\n  color: var(--text-color-secondary);\r\n}\r\n\r\n.calendar-body {\r\n  display: grid;\r\n  grid-template-columns: repeat(7, 1fr);\r\n  gap: 5px;\r\n}\r\n\r\n.calendar-day {\r\n  aspect-ratio: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  border-radius: 4px;\r\n  position: relative;\r\n  padding: 5px;\r\n}\r\n\r\n.calendar-day:hover {\r\n  background-color: var(--background-color-light);\r\n}\r\n\r\n.other-month {\r\n  color: var(--text-color-secondary);\r\n}\r\n\r\n.today {\r\n  background-color: var(--primary-color-light);\r\n  color: var(--primary-color);\r\n}\r\n\r\n.has-event {\r\n  font-weight: bold;\r\n}\r\n\r\n.event-dot {\r\n  width: 6px;\r\n  height: 6px;\r\n  background-color: var(--primary-color);\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  bottom: 5px;\r\n}\r\n\r\n.day-number {\r\n  font-size: 14px;\r\n}\r\n</style> "],"mappings":";;EAGWA,KAAK,EAAC;AAAa;;EAYrBA,KAAK,EAAC;AAAkB;;EACtBA,KAAK,EAAC;AAAiB;;EAKvBA,KAAK,EAAC;AAAe;mBArBhC;;EAiCgBA,KAAK,EAAC;AAAY;;EAjClCC,GAAA;EAkCmCD,KAAK,EAAC;;;;;;;;;uBAjCvCE,YAAA,CAqCUC,kBAAA;IArCDH,KAAK,EAAC;EAAiB;IACnBI,MAAM,EAAAC,QAAA,CACf,MAUM,CAVNC,mBAAA,CAUM,OAVNC,UAUM,G,0BATJD,mBAAA,CAAe,cAAT,IAAE,sBACRE,YAAA,CAOkBC,0BAAA;MAZ1BC,OAAA,EAAAL,QAAA,CAMU,MAEY,CAFZG,YAAA,CAEYG,oBAAA;QAFDC,IAAI,EAAC,OAAO;QAAEC,OAAK,EAAEC,QAAA,CAAAC;;QAN1CL,OAAA,EAAAL,QAAA,CAOY,MAAgC,CAAhCG,YAAA,CAAgCQ,kBAAA;UAP5CN,OAAA,EAAAL,QAAA,CAOqB,MAAa,CAAbG,YAAA,CAAaS,oBAAA,E;UAPlCC,CAAA;;QAAAA,CAAA;sCASUV,YAAA,CAEYG,oBAAA;QAFDC,IAAI,EAAC,OAAO;QAAEC,OAAK,EAAEC,QAAA,CAAAK;;QAT1CT,OAAA,EAAAL,QAAA,CAUY,MAAiC,CAAjCG,YAAA,CAAiCQ,kBAAA;UAV7CN,OAAA,EAAAL,QAAA,CAUqB,MAAc,CAAdG,YAAA,CAAcY,qBAAA,E;UAVnCF,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;;IAAAR,OAAA,EAAAL,QAAA,CAeI,MAsBM,CAtBNC,mBAAA,CAsBM,OAtBNe,UAsBM,GArBJf,mBAAA,CAIM,OAJNgB,UAIM,I,kBAHJC,mBAAA,CAEMC,SAAA,QAnBdC,WAAA,CAiB2BC,KAAA,CAAAC,QAAQ,EAAfC,GAAG;2BAAfL,mBAAA,CAEM;QAFwBtB,GAAG,EAAE2B,GAAG;QAAE5B,KAAK,EAAC;0BACzC4B,GAAG;sCAGVtB,mBAAA,CAeM,OAfNuB,UAeM,I,kBAdJN,mBAAA,CAaMC,SAAA,QAnCdC,WAAA,CAuBiCX,QAAA,CAAAgB,YAAY,EAvB7C,CAuBkBF,GAAG,EAAEG,KAAK;2BADpBR,mBAAA,CAaM;QAXHtB,GAAG,EAAE8B,KAAK;QACX/B,KAAK,EAzBfgC,eAAA,EAyBgB,cAAc;0BACmBJ,GAAG,CAACK,YAAY;mBAAwBL,GAAG,CAACM,OAAO;uBAA4BN,GAAG,CAACO;;QAKzHtB,OAAK,EAAAuB,MAAA,IAAEtB,QAAA,CAAAuB,cAAc,CAACT,GAAG;UAE1BtB,mBAAA,CAAwD,QAAxDgC,UAAwD,EAAAC,gBAAA,CAA5BX,GAAG,CAACY,IAAI,CAACC,OAAO,oBACjCb,GAAG,CAACO,QAAQ,I,cAAvBZ,mBAAA,CAAiD,OAAjDmB,UAAiD,KAlC3DC,mBAAA,e,yBAAAC,UAAA;;IAAA1B,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}