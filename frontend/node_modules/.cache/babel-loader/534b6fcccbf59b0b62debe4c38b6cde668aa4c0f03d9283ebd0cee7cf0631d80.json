{"ast":null,"code":"import { User, More, Star, ChatDotRound, Share } from '@element-plus/icons-vue';\nexport default {\n  name: 'PostList',\n  components: {\n    User,\n    More,\n    Star,\n    ChatDotRound,\n    Share\n  },\n  props: {\n    title: {\n      type: String,\n      default: '帖子列表'\n    },\n    posts: {\n      type: Array,\n      default: () => []\n    },\n    total: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      searchQuery: '',\n      sortBy: 'latest',\n      currentPage: 1,\n      pageSize: 10\n    };\n  },\n  watch: {\n    sortBy(val) {\n      this.$emit('sort-change', val);\n    }\n  },\n  methods: {\n    isAuthor(userId) {\n      // 这里需要根据实际用户ID判断\n      return userId === 'current-user-id';\n    },\n    handlePostClick(post) {\n      this.$emit('post-click', post);\n    },\n    handleEdit(post) {\n      this.$emit('edit', post);\n    },\n    handleDelete(post) {\n      this.$confirm('确定要删除这篇帖子吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$emit('delete', post);\n      });\n    },\n    handleLike(post) {\n      this.$emit('like', post);\n    },\n    handleComment(post) {\n      this.$emit('comment', post);\n    },\n    handleShare(post) {\n      this.$emit('share', post);\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.$emit('page-change', {\n        page: this.currentPage,\n        size: val\n      });\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n      this.$emit('page-change', {\n        page: val,\n        size: this.pageSize\n      });\n    },\n    handleSearch(value) {\n      this.$emit('search', value);\n    },\n    handleSort(value) {\n      this.$emit('sort', value);\n    }\n  }\n};","map":{"version":3,"names":["User","More","Star","ChatDotRound","Share","name","components","props","title","type","String","default","posts","Array","total","Number","data","searchQuery","sortBy","currentPage","pageSize","watch","val","$emit","methods","isAuthor","userId","handlePostClick","post","handleEdit","handleDelete","$confirm","confirmButtonText","cancelButtonText","then","handleLike","handleComment","handleShare","handleSizeChange","page","size","handleCurrentChange","handleSearch","value","handleSort"],"sources":["C:\\Users\\仲佳泽\\Desktop\\大学作业\\软件工程\\moyun-reading-platform\\frontend\\src\\components\\post\\PostList.vue"],"sourcesContent":["<template>\r\n  <div class=\"post-list\">\r\n    <div class=\"list-header\">\r\n      <div class=\"header-left\">\r\n        <h2>{{ title }}</h2>\r\n        <el-tag v-if=\"total\" size=\"small\">{{ total }}篇</el-tag>\r\n      </div>\r\n      <div class=\"header-right\">\r\n        <el-input\r\n          v-model=\"searchQuery\"\r\n          placeholder=\"搜索帖子...\"\r\n          @input=\"handleSearch\"\r\n        />\r\n        <el-select\r\n          v-model=\"sortBy\"\r\n          placeholder=\"排序方式\"\r\n          @change=\"handleSort\"\r\n        >\r\n          <el-option label=\"最新\" value=\"latest\" />\r\n          <el-option label=\"最热\" value=\"hottest\" />\r\n        </el-select>\r\n      </div>\r\n    </div>\r\n    <div class=\"posts-container\">\r\n      <el-card\r\n        v-for=\"post in posts\"\r\n        :key=\"post.id\"\r\n        class=\"post-card\"\r\n        :body-style=\"{ padding: '20px' }\"\r\n        @click=\"handlePostClick(post)\"\r\n      >\r\n        <div class=\"post-header\">\r\n          <div class=\"user-info\">\r\n            <el-avatar :size=\"40\" :src=\"post.user.avatar\" :alt=\"post.user.username\">\r\n              <el-icon><User /></el-icon>\r\n            </el-avatar>\r\n            <div class=\"user-details\">\r\n              <span class=\"username\">{{ post.user.username }}</span>\r\n              <span class=\"post-time\">{{ post.createTime }}</span>\r\n            </div>\r\n          </div>\r\n          <el-dropdown v-if=\"isAuthor(post.user.id)\">\r\n            <el-button type=\"text\" title=\"更多操作\">\r\n              <el-icon><More /></el-icon>\r\n            </el-button>\r\n            <template #dropdown>\r\n              <el-dropdown-menu>\r\n                <el-dropdown-item @click.stop=\"handleEdit(post)\">编辑</el-dropdown-item>\r\n                <el-dropdown-item @click.stop=\"handleDelete(post)\" class=\"danger\">删除</el-dropdown-item>\r\n              </el-dropdown-menu>\r\n            </template>\r\n          </el-dropdown>\r\n        </div>\r\n        <div class=\"post-content\">\r\n          <h3 class=\"post-title\">{{ post.title }}</h3>\r\n          <p class=\"post-text\">{{ post.content }}</p>\r\n          <div v-if=\"post.images && post.images.length\" class=\"post-images\">\r\n            <el-image\r\n              v-for=\"(image, index) in post.images.slice(0, 3)\"\r\n              :key=\"index\"\r\n              :src=\"image\"\r\n              :preview-src-list=\"post.images\"\r\n              fit=\"cover\"\r\n              class=\"post-image\"\r\n              :alt=\"`帖子图片 ${index + 1}`\"\r\n            />\r\n            <div v-if=\"post.images.length > 3\" class=\"image-more\">\r\n              +{{ post.images.length - 3 }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"post-footer\">\r\n          <div class=\"post-actions\">\r\n            <el-button type=\"text\" @click.stop=\"handleLike(post)\">\r\n              <el-icon><Star /></el-icon>\r\n              <span>{{ post.likeCount }}</span>\r\n            </el-button>\r\n            <el-button type=\"text\" @click.stop=\"handleComment(post)\">\r\n              <el-icon><ChatDotRound /></el-icon>\r\n              <span>{{ post.commentCount }}</span>\r\n            </el-button>\r\n            <el-button type=\"text\" @click.stop=\"handleShare(post)\">\r\n              <el-icon><Share /></el-icon>\r\n              <span>分享</span>\r\n            </el-button>\r\n          </div>\r\n          <div class=\"post-tags\" v-if=\"post.tags && post.tags.length\">\r\n            <el-tag\r\n              v-for=\"tag in post.tags\"\r\n              :key=\"tag\"\r\n              size=\"small\"\r\n              class=\"post-tag\"\r\n            >\r\n              {{ tag }}\r\n            </el-tag>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n    <div class=\"list-footer\" v-if=\"total > pageSize\">\r\n      <el-pagination\r\n        v-model:current-page=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        :total=\"total\"\r\n        :page-sizes=\"[10, 20, 30, 50]\"\r\n        layout=\"total, sizes, prev, pager, next\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { User, More, Star, ChatDotRound, Share } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'PostList',\r\n  components: {\r\n    User,\r\n    More,\r\n    Star,\r\n    ChatDotRound,\r\n    Share\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: '帖子列表'\r\n    },\r\n    posts: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    total: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      searchQuery: '',\r\n      sortBy: 'latest',\r\n      currentPage: 1,\r\n      pageSize: 10\r\n    }\r\n  },\r\n  watch: {\r\n    sortBy(val) {\r\n      this.$emit('sort-change', val)\r\n    }\r\n  },\r\n  methods: {\r\n    isAuthor(userId) {\r\n      // 这里需要根据实际用户ID判断\r\n      return userId === 'current-user-id'\r\n    },\r\n    handlePostClick(post) {\r\n      this.$emit('post-click', post)\r\n    },\r\n    handleEdit(post) {\r\n      this.$emit('edit', post)\r\n    },\r\n    handleDelete(post) {\r\n      this.$confirm('确定要删除这篇帖子吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.$emit('delete', post)\r\n      })\r\n    },\r\n    handleLike(post) {\r\n      this.$emit('like', post)\r\n    },\r\n    handleComment(post) {\r\n      this.$emit('comment', post)\r\n    },\r\n    handleShare(post) {\r\n      this.$emit('share', post)\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val\r\n      this.$emit('page-change', {\r\n        page: this.currentPage,\r\n        size: val\r\n      })\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val\r\n      this.$emit('page-change', {\r\n        page: val,\r\n        size: this.pageSize\r\n      })\r\n    },\r\n    handleSearch(value) {\r\n      this.$emit('search', value)\r\n    },\r\n    handleSort(value) {\r\n      this.$emit('sort', value)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.post-list {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.list-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.header-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.header-left h2 {\r\n  margin: 0;\r\n  font-size: 24px;\r\n  color: var(--text-color);\r\n}\r\n\r\n.posts-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.post-card {\r\n  cursor: pointer;\r\n  transition: transform 0.3s;\r\n}\r\n\r\n.post-card:hover {\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.post-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.user-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.username {\r\n  font-weight: bold;\r\n  color: var(--text-color);\r\n}\r\n\r\n.post-time {\r\n  font-size: 12px;\r\n  color: var(--text-color-secondary);\r\n}\r\n\r\n.post-content {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.post-title {\r\n  margin: 0 0 10px;\r\n  font-size: 18px;\r\n  color: var(--text-color);\r\n}\r\n\r\n.post-text {\r\n  margin: 0 0 15px;\r\n  color: var(--text-color);\r\n  line-height: 1.6;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 3;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n\r\n.post-images {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 10px;\r\n  position: relative;\r\n}\r\n\r\n.post-image {\r\n  width: 100%;\r\n  height: 200px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.image-more {\r\n  position: absolute;\r\n  right: 0;\r\n  bottom: 0;\r\n  width: 33.33%;\r\n  height: 200px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  color: white;\r\n  font-size: 24px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.post-footer {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-top: 15px;\r\n  border-top: 1px solid var(--border-color);\r\n}\r\n\r\n.post-actions {\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n\r\n.post-tags {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.list-footer {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.danger {\r\n  color: var(--danger-color);\r\n}\r\n</style> "],"mappings":"AAkHA,SAASA,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAEC,YAAY,EAAEC,KAAI,QAAS,yBAAwB;AAE9E,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACVN,IAAI;IACJC,IAAI;IACJC,IAAI;IACJC,YAAY;IACZC;EACF,CAAC;EACDG,KAAK,EAAE;IACLC,KAAK,EAAE;MACLC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX,CAAC;IACDC,KAAK,EAAE;MACLH,IAAI,EAAEI,KAAK;MACXF,OAAO,EAAEA,CAAA,KAAM;IACjB,CAAC;IACDG,KAAK,EAAE;MACLL,IAAI,EAAEM,MAAM;MACZJ,OAAO,EAAE;IACX;EACF,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,EAAE;MACfC,MAAM,EAAE,QAAQ;MAChBC,WAAW,EAAE,CAAC;MACdC,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,KAAK,EAAE;IACLH,MAAMA,CAACI,GAAG,EAAE;MACV,IAAI,CAACC,KAAK,CAAC,aAAa,EAAED,GAAG;IAC/B;EACF,CAAC;EACDE,OAAO,EAAE;IACPC,QAAQA,CAACC,MAAM,EAAE;MACf;MACA,OAAOA,MAAK,KAAM,iBAAgB;IACpC,CAAC;IACDC,eAAeA,CAACC,IAAI,EAAE;MACpB,IAAI,CAACL,KAAK,CAAC,YAAY,EAAEK,IAAI;IAC/B,CAAC;IACDC,UAAUA,CAACD,IAAI,EAAE;MACf,IAAI,CAACL,KAAK,CAAC,MAAM,EAAEK,IAAI;IACzB,CAAC;IACDE,YAAYA,CAACF,IAAI,EAAE;MACjB,IAAI,CAACG,QAAQ,CAAC,aAAa,EAAE,IAAI,EAAE;QACjCC,iBAAiB,EAAE,IAAI;QACvBC,gBAAgB,EAAE,IAAI;QACtBxB,IAAI,EAAE;MACR,CAAC,CAAC,CAACyB,IAAI,CAAC,MAAM;QACZ,IAAI,CAACX,KAAK,CAAC,QAAQ,EAAEK,IAAI;MAC3B,CAAC;IACH,CAAC;IACDO,UAAUA,CAACP,IAAI,EAAE;MACf,IAAI,CAACL,KAAK,CAAC,MAAM,EAAEK,IAAI;IACzB,CAAC;IACDQ,aAAaA,CAACR,IAAI,EAAE;MAClB,IAAI,CAACL,KAAK,CAAC,SAAS,EAAEK,IAAI;IAC5B,CAAC;IACDS,WAAWA,CAACT,IAAI,EAAE;MAChB,IAAI,CAACL,KAAK,CAAC,OAAO,EAAEK,IAAI;IAC1B,CAAC;IACDU,gBAAgBA,CAAChB,GAAG,EAAE;MACpB,IAAI,CAACF,QAAO,GAAIE,GAAE;MAClB,IAAI,CAACC,KAAK,CAAC,aAAa,EAAE;QACxBgB,IAAI,EAAE,IAAI,CAACpB,WAAW;QACtBqB,IAAI,EAAElB;MACR,CAAC;IACH,CAAC;IACDmB,mBAAmBA,CAACnB,GAAG,EAAE;MACvB,IAAI,CAACH,WAAU,GAAIG,GAAE;MACrB,IAAI,CAACC,KAAK,CAAC,aAAa,EAAE;QACxBgB,IAAI,EAAEjB,GAAG;QACTkB,IAAI,EAAE,IAAI,CAACpB;MACb,CAAC;IACH,CAAC;IACDsB,YAAYA,CAACC,KAAK,EAAE;MAClB,IAAI,CAACpB,KAAK,CAAC,QAAQ,EAAEoB,KAAK;IAC5B,CAAC;IACDC,UAAUA,CAACD,KAAK,EAAE;MAChB,IAAI,CAACpB,KAAK,CAAC,MAAM,EAAEoB,KAAK;IAC1B;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}