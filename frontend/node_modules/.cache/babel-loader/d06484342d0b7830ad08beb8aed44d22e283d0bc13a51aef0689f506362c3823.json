{"ast":null,"code":"import { getAdminDashboard } from '@/api/dashboard';\nimport { Refresh } from '@element-plus/icons-vue';\nexport default {\n  name: 'AdminDashboard',\n  components: {\n    Refresh\n  },\n  data() {\n    return {\n      stats: {\n        totalUsers: 0,\n        mentors: 0,\n        students: 0\n      },\n      systemStatus: {\n        server: true,\n        database: true\n      },\n      lastUpdate: '',\n      activities: [],\n      loading: {\n        stats: false,\n        system: false,\n        activities: false\n      }\n    };\n  },\n  async created() {\n    await this.fetchDashboardData();\n  },\n  methods: {\n    async fetchDashboardData() {\n      try {\n        const {\n          data\n        } = await getAdminDashboard();\n        this.stats = data.stats;\n        this.systemStatus = data.systemStatus;\n        this.lastUpdate = data.lastUpdate;\n        this.activities = data.activities;\n      } catch (error) {\n        this.$message.error('获取数据失败：' + error.message);\n      }\n    },\n    async refreshStats() {\n      this.loading.stats = true;\n      try {\n        const {\n          data\n        } = await getAdminDashboard();\n        this.stats = data.stats;\n      } catch (error) {\n        this.$message.error('刷新统计数据失败：' + error.message);\n      } finally {\n        this.loading.stats = false;\n      }\n    },\n    async refreshSystemStatus() {\n      this.loading.system = true;\n      try {\n        const {\n          data\n        } = await getAdminDashboard();\n        this.systemStatus = data.systemStatus;\n        this.lastUpdate = data.lastUpdate;\n      } catch (error) {\n        this.$message.error('刷新系统状态失败：' + error.message);\n      } finally {\n        this.loading.system = false;\n      }\n    },\n    async refreshActivities() {\n      this.loading.activities = true;\n      try {\n        const {\n          data\n        } = await getAdminDashboard();\n        this.activities = data.activities;\n      } catch (error) {\n        this.$message.error('刷新活动列表失败：' + error.message);\n      } finally {\n        this.loading.activities = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["getAdminDashboard","Refresh","name","components","data","stats","totalUsers","mentors","students","systemStatus","server","database","lastUpdate","activities","loading","system","created","fetchDashboardData","methods","error","$message","message","refreshStats","refreshSystemStatus","refreshActivities"],"sources":["C:\\Users\\仲佳泽\\Desktop\\大学作业\\软件工程\\moyun-reading-platform\\frontend\\src\\views\\admin\\AdminDashboard.vue"],"sourcesContent":["<template>\r\n  <div class=\"admin-dashboard\">\r\n    <h1>管理员工作台</h1>\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"8\">\r\n        <el-card v-loading=\"loading.stats\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>用户统计</span>\r\n              <el-button type=\"text\" @click=\"refreshStats\">\r\n                <el-icon><Refresh /></el-icon>\r\n              </el-button>\r\n            </div>\r\n          </template>\r\n          <div class=\"user-stats\">\r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"8\">\r\n                <div class=\"stat-item\">\r\n                  <div class=\"stat-value\">{{ stats.totalUsers }}</div>\r\n                  <div class=\"stat-label\">总用户</div>\r\n                </div>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <div class=\"stat-item\">\r\n                  <div class=\"stat-value\">{{ stats.mentors }}</div>\r\n                  <div class=\"stat-label\">导师</div>\r\n                </div>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <div class=\"stat-item\">\r\n                  <div class=\"stat-value\">{{ stats.students }}</div>\r\n                  <div class=\"stat-label\">学生</div>\r\n                </div>\r\n              </el-col>\r\n            </el-row>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"8\">\r\n        <el-card v-loading=\"loading.system\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>系统状态</span>\r\n              <el-button type=\"text\" @click=\"refreshSystemStatus\">\r\n                <el-icon><Refresh /></el-icon>\r\n              </el-button>\r\n            </div>\r\n          </template>\r\n          <div class=\"system-status\">\r\n            <el-descriptions :column=\"1\" border>\r\n              <el-descriptions-item label=\"服务器状态\">\r\n                <el-tag :type=\"systemStatus.server ? 'success' : 'danger'\">\r\n                  {{ systemStatus.server ? '正常' : '异常' }}\r\n                </el-tag>\r\n              </el-descriptions-item>\r\n              <el-descriptions-item label=\"数据库状态\">\r\n                <el-tag :type=\"systemStatus.database ? 'success' : 'danger'\">\r\n                  {{ systemStatus.database ? '正常' : '异常' }}\r\n                </el-tag>\r\n              </el-descriptions-item>\r\n              <el-descriptions-item label=\"最后更新\">\r\n                {{ lastUpdate }}\r\n              </el-descriptions-item>\r\n            </el-descriptions>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"8\">\r\n        <el-card v-loading=\"loading.activities\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>最近活动</span>\r\n              <el-button type=\"text\" @click=\"refreshActivities\">\r\n                <el-icon><Refresh /></el-icon>\r\n              </el-button>\r\n            </div>\r\n          </template>\r\n          <div class=\"activity-list\">\r\n            <el-empty v-if=\"!activities.length\" description=\"暂无活动\" />\r\n            <el-timeline v-else>\r\n              <el-timeline-item\r\n                v-for=\"activity in activities\"\r\n                :key=\"activity.id\"\r\n                :timestamp=\"activity.time\"\r\n                :type=\"activity.type\"\r\n              >\r\n                {{ activity.content }}\r\n              </el-timeline-item>\r\n            </el-timeline>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAdminDashboard } from '@/api/dashboard'\r\nimport { Refresh } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'AdminDashboard',\r\n  components: {\r\n    Refresh\r\n  },\r\n  data() {\r\n    return {\r\n      stats: {\r\n        totalUsers: 0,\r\n        mentors: 0,\r\n        students: 0\r\n      },\r\n      systemStatus: {\r\n        server: true,\r\n        database: true\r\n      },\r\n      lastUpdate: '',\r\n      activities: [],\r\n      loading: {\r\n        stats: false,\r\n        system: false,\r\n        activities: false\r\n      }\r\n    }\r\n  },\r\n  async created() {\r\n    await this.fetchDashboardData()\r\n  },\r\n  methods: {\r\n    async fetchDashboardData() {\r\n      try {\r\n        const { data } = await getAdminDashboard()\r\n        this.stats = data.stats\r\n        this.systemStatus = data.systemStatus\r\n        this.lastUpdate = data.lastUpdate\r\n        this.activities = data.activities\r\n      } catch (error) {\r\n        this.$message.error('获取数据失败：' + error.message)\r\n      }\r\n    },\r\n    async refreshStats() {\r\n      this.loading.stats = true\r\n      try {\r\n        const { data } = await getAdminDashboard()\r\n        this.stats = data.stats\r\n      } catch (error) {\r\n        this.$message.error('刷新统计数据失败：' + error.message)\r\n      } finally {\r\n        this.loading.stats = false\r\n      }\r\n    },\r\n    async refreshSystemStatus() {\r\n      this.loading.system = true\r\n      try {\r\n        const { data } = await getAdminDashboard()\r\n        this.systemStatus = data.systemStatus\r\n        this.lastUpdate = data.lastUpdate\r\n      } catch (error) {\r\n        this.$message.error('刷新系统状态失败：' + error.message)\r\n      } finally {\r\n        this.loading.system = false\r\n      }\r\n    },\r\n    async refreshActivities() {\r\n      this.loading.activities = true\r\n      try {\r\n        const { data } = await getAdminDashboard()\r\n        this.activities = data.activities\r\n      } catch (error) {\r\n        this.$message.error('刷新活动列表失败：' + error.message)\r\n      } finally {\r\n        this.loading.activities = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.admin-dashboard {\r\n  padding: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.user-stats,\r\n.system-status,\r\n.activity-list {\r\n  min-height: 200px;\r\n}\r\n\r\n.stat-item {\r\n  text-align: center;\r\n  padding: 20px 0;\r\n}\r\n\r\n.stat-value {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: #409EFF;\r\n}\r\n\r\n.stat-label {\r\n  margin-top: 8px;\r\n  color: #666;\r\n}\r\n\r\n.el-timeline {\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n</style>"],"mappings":"AAiGA,SAASA,iBAAgB,QAAS,iBAAgB;AAClD,SAASC,OAAM,QAAS,yBAAwB;AAEhD,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,UAAU,EAAE;IACVF;EACF,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE;QACLC,UAAU,EAAE,CAAC;QACbC,OAAO,EAAE,CAAC;QACVC,QAAQ,EAAE;MACZ,CAAC;MACDC,YAAY,EAAE;QACZC,MAAM,EAAE,IAAI;QACZC,QAAQ,EAAE;MACZ,CAAC;MACDC,UAAU,EAAE,EAAE;MACdC,UAAU,EAAE,EAAE;MACdC,OAAO,EAAE;QACPT,KAAK,EAAE,KAAK;QACZU,MAAM,EAAE,KAAK;QACbF,UAAU,EAAE;MACd;IACF;EACF,CAAC;EACD,MAAMG,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACC,kBAAkB,CAAC;EAChC,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,kBAAkBA,CAAA,EAAG;MACzB,IAAI;QACF,MAAM;UAAEb;QAAK,IAAI,MAAMJ,iBAAiB,CAAC;QACzC,IAAI,CAACK,KAAI,GAAID,IAAI,CAACC,KAAI;QACtB,IAAI,CAACI,YAAW,GAAIL,IAAI,CAACK,YAAW;QACpC,IAAI,CAACG,UAAS,GAAIR,IAAI,CAACQ,UAAS;QAChC,IAAI,CAACC,UAAS,GAAIT,IAAI,CAACS,UAAS;MAClC,EAAE,OAAOM,KAAK,EAAE;QACd,IAAI,CAACC,QAAQ,CAACD,KAAK,CAAC,SAAQ,GAAIA,KAAK,CAACE,OAAO;MAC/C;IACF,CAAC;IACD,MAAMC,YAAYA,CAAA,EAAG;MACnB,IAAI,CAACR,OAAO,CAACT,KAAI,GAAI,IAAG;MACxB,IAAI;QACF,MAAM;UAAED;QAAK,IAAI,MAAMJ,iBAAiB,CAAC;QACzC,IAAI,CAACK,KAAI,GAAID,IAAI,CAACC,KAAI;MACxB,EAAE,OAAOc,KAAK,EAAE;QACd,IAAI,CAACC,QAAQ,CAACD,KAAK,CAAC,WAAU,GAAIA,KAAK,CAACE,OAAO;MACjD,UAAU;QACR,IAAI,CAACP,OAAO,CAACT,KAAI,GAAI,KAAI;MAC3B;IACF,CAAC;IACD,MAAMkB,mBAAmBA,CAAA,EAAG;MAC1B,IAAI,CAACT,OAAO,CAACC,MAAK,GAAI,IAAG;MACzB,IAAI;QACF,MAAM;UAAEX;QAAK,IAAI,MAAMJ,iBAAiB,CAAC;QACzC,IAAI,CAACS,YAAW,GAAIL,IAAI,CAACK,YAAW;QACpC,IAAI,CAACG,UAAS,GAAIR,IAAI,CAACQ,UAAS;MAClC,EAAE,OAAOO,KAAK,EAAE;QACd,IAAI,CAACC,QAAQ,CAACD,KAAK,CAAC,WAAU,GAAIA,KAAK,CAACE,OAAO;MACjD,UAAU;QACR,IAAI,CAACP,OAAO,CAACC,MAAK,GAAI,KAAI;MAC5B;IACF,CAAC;IACD,MAAMS,iBAAiBA,CAAA,EAAG;MACxB,IAAI,CAACV,OAAO,CAACD,UAAS,GAAI,IAAG;MAC7B,IAAI;QACF,MAAM;UAAET;QAAK,IAAI,MAAMJ,iBAAiB,CAAC;QACzC,IAAI,CAACa,UAAS,GAAIT,IAAI,CAACS,UAAS;MAClC,EAAE,OAAOM,KAAK,EAAE;QACd,IAAI,CAACC,QAAQ,CAACD,KAAK,CAAC,WAAU,GAAIA,KAAK,CAACE,OAAO;MACjD,UAAU;QACR,IAAI,CAACP,OAAO,CAACD,UAAS,GAAI,KAAI;MAChC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}