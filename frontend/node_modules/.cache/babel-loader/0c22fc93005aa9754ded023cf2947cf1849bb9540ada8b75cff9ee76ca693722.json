{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapActions } from 'vuex';\nexport default {\n  name: 'RegisterView',\n  data() {\n    return {\n      form: {\n        username: '',\n        email: '',\n        password: '',\n        role: '',\n        mentorId: null\n      },\n      mentors: [],\n      rules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 20,\n          message: '长度在3到20个字符',\n          trigger: 'blur'\n        }],\n        email: [{\n          required: true,\n          message: '请输入邮箱',\n          trigger: 'blur'\n        }, {\n          type: 'email',\n          message: '请输入正确的邮箱格式',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          message: '密码长度至少6位',\n          trigger: 'blur'\n        }],\n        role: [{\n          required: true,\n          message: '请选择角色',\n          trigger: 'change'\n        }],\n        mentorId: [{\n          required: true,\n          message: '请选择导师',\n          trigger: 'change'\n        }]\n      },\n      loading: false\n    };\n  },\n  async created() {\n    await this.loadMentors();\n  },\n  methods: {\n    ...mapActions('auth', ['register']),\n    async loadMentors() {\n      try {\n        const response = await this.$api.users.getAllMentors();\n        this.mentors = response.data;\n      } catch (error) {\n        this.$message.error('加载导师列表失败');\n      }\n    },\n    async handleRegister() {\n      try {\n        this.loading = true;\n        await this.$refs.registerForm.validate();\n        await this.register(this.form);\n        this.$message.success('注册成功！');\n        this.$router.push('/login');\n      } catch (error) {\n        this.$message.error(error.message);\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapActions","name","data","form","username","email","password","role","mentorId","mentors","rules","required","message","trigger","min","max","type","loading","created","loadMentors","methods","response","$api","users","getAllMentors","error","$message","handleRegister","$refs","registerForm","validate","register","success","$router","push"],"sources":["C:\\Users\\仲佳泽\\Desktop\\大学作业\\软件工程\\moyun-reading-platform\\frontend\\src\\views\\auth\\Register.vue"],"sourcesContent":["<template>\r\n    <div class=\"register-container\">\r\n      <el-card class=\"register-card\">\r\n        <h2>注册新账号</h2>\r\n        <el-form \r\n          :model=\"form\" \r\n          :rules=\"rules\" \r\n          ref=\"registerForm\"\r\n          @submit.prevent=\"handleRegister\"\r\n        >\r\n          <el-form-item prop=\"username\">\r\n            <el-input\r\n              v-model=\"form.username\"\r\n              placeholder=\"用户名\"\r\n              prefix-icon=\"el-icon-user\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item prop=\"email\">\r\n            <el-input\r\n              v-model=\"form.email\"\r\n              placeholder=\"邮箱\"\r\n              prefix-icon=\"el-icon-message\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item prop=\"password\">\r\n            <el-input\r\n              v-model=\"form.password\"\r\n              type=\"password\"\r\n              placeholder=\"密码（至少6位）\"\r\n              prefix-icon=\"el-icon-lock\"\r\n              show-password\r\n            />\r\n          </el-form-item>\r\n          <el-form-item prop=\"role\">\r\n            <el-select \r\n              v-model=\"form.role\" \r\n              placeholder=\"选择角色\"\r\n              style=\"width: 100%\"\r\n            >\r\n              <el-option label=\"学生\" value=\"student\" />\r\n              <el-option label=\"导师\" value=\"mentor\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item \r\n            prop=\"mentorId\"\r\n            v-if=\"form.role === 'student'\"\r\n          >\r\n            <el-select\r\n              v-model=\"form.mentorId\"\r\n              placeholder=\"选择导师\"\r\n              style=\"width: 100%\"\r\n              filterable\r\n            >\r\n              <el-option\r\n                v-for=\"mentor in mentors\"\r\n                :key=\"mentor.id\"\r\n                :label=\"mentor.username\"\r\n                :value=\"mentor.id\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button \r\n              type=\"primary\" \r\n              native-type=\"submit\"\r\n              :loading=\"loading\"\r\n              class=\"register-btn\"\r\n            >\r\n              注册\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div class=\"footer\">\r\n          <router-link to=\"/login\">已有账号？立即登录</router-link>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { mapActions } from 'vuex'\r\n  \r\n  export default {\r\n    name: 'RegisterView',\r\n    data() {\r\n      return {\r\n        form: {\r\n          username: '',\r\n          email: '',\r\n          password: '',\r\n          role: '',\r\n          mentorId: null\r\n        },\r\n        mentors: [],\r\n        rules: {\r\n          username: [\r\n            { required: true, message: '请输入用户名', trigger: 'blur' },\r\n            { min: 3, max: 20, message: '长度在3到20个字符', trigger: 'blur' }\r\n          ],\r\n          email: [\r\n            { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n            { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\r\n          ],\r\n          password: [\r\n            { required: true, message: '请输入密码', trigger: 'blur' },\r\n            { min: 6, message: '密码长度至少6位', trigger: 'blur' }\r\n          ],\r\n          role: [\r\n            { required: true, message: '请选择角色', trigger: 'change' }\r\n          ],\r\n          mentorId: [\r\n            { required: true, message: '请选择导师', trigger: 'change' }\r\n          ]\r\n        },\r\n        loading: false\r\n      }\r\n    },\r\n    async created() {\r\n      await this.loadMentors()\r\n    },\r\n    methods: {\r\n      ...mapActions('auth', ['register']),\r\n      async loadMentors() {\r\n        try {\r\n          const response = await this.$api.users.getAllMentors()\r\n          this.mentors = response.data\r\n        } catch (error) {\r\n          this.$message.error('加载导师列表失败')\r\n        }\r\n      },\r\n      async handleRegister() {\r\n        try {\r\n          this.loading = true\r\n          await this.$refs.registerForm.validate()\r\n          await this.register(this.form)\r\n          this.$message.success('注册成功！')\r\n          this.$router.push('/login')\r\n        } catch (error) {\r\n          this.$message.error(error.message)\r\n        } finally {\r\n          this.loading = false\r\n        }\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .register-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100vh;\r\n    background: #f5f7fa;\r\n  }\r\n  \r\n  .register-card {\r\n    width: 450px;\r\n    padding: 20px;\r\n  }\r\n  \r\n  h2 {\r\n    text-align: center;\r\n    margin-bottom: 30px;\r\n    color: #333;\r\n  }\r\n  \r\n  .register-btn {\r\n    width: 100%;\r\n  }\r\n  \r\n  .footer {\r\n    text-align: center;\r\n    margin-top: 20px;\r\n    font-size: 14px;\r\n  }\r\n  </style>"],"mappings":";AAgFE,SAASA,UAAS,QAAS,MAAK;AAEhC,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,QAAQ,EAAE,EAAE;QACZC,KAAK,EAAE,EAAE;QACTC,QAAQ,EAAE,EAAE;QACZC,IAAI,EAAE,EAAE;QACRC,QAAQ,EAAE;MACZ,CAAC;MACDC,OAAO,EAAE,EAAE;MACXC,KAAK,EAAE;QACLN,QAAQ,EAAE,CACR;UAAEO,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,QAAQ;UAAEC,OAAO,EAAE;QAAO,CAAC,EACtD;UAAEC,GAAG,EAAE,CAAC;UAAEC,GAAG,EAAE,EAAE;UAAEH,OAAO,EAAE,YAAY;UAAEC,OAAO,EAAE;QAAO,EAC3D;QACDR,KAAK,EAAE,CACL;UAAEM,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,OAAO;UAAEC,OAAO,EAAE;QAAO,CAAC,EACrD;UAAEG,IAAI,EAAE,OAAO;UAAEJ,OAAO,EAAE,YAAY;UAAEC,OAAO,EAAE;QAAO,EACzD;QACDP,QAAQ,EAAE,CACR;UAAEK,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,OAAO;UAAEC,OAAO,EAAE;QAAO,CAAC,EACrD;UAAEC,GAAG,EAAE,CAAC;UAAEF,OAAO,EAAE,UAAU;UAAEC,OAAO,EAAE;QAAO,EAChD;QACDN,IAAI,EAAE,CACJ;UAAEI,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,OAAO;UAAEC,OAAO,EAAE;QAAS,EACvD;QACDL,QAAQ,EAAE,CACR;UAAEG,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,OAAO;UAAEC,OAAO,EAAE;QAAS;MAE1D,CAAC;MACDI,OAAO,EAAE;IACX;EACF,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACC,WAAW,CAAC;EACzB,CAAC;EACDC,OAAO,EAAE;IACP,GAAGpB,UAAU,CAAC,MAAM,EAAE,CAAC,UAAU,CAAC,CAAC;IACnC,MAAMmB,WAAWA,CAAA,EAAG;MAClB,IAAI;QACF,MAAME,QAAO,GAAI,MAAM,IAAI,CAACC,IAAI,CAACC,KAAK,CAACC,aAAa,CAAC;QACrD,IAAI,CAACf,OAAM,GAAIY,QAAQ,CAACnB,IAAG;MAC7B,EAAE,OAAOuB,KAAK,EAAE;QACd,IAAI,CAACC,QAAQ,CAACD,KAAK,CAAC,UAAU;MAChC;IACF,CAAC;IACD,MAAME,cAAcA,CAAA,EAAG;MACrB,IAAI;QACF,IAAI,CAACV,OAAM,GAAI,IAAG;QAClB,MAAM,IAAI,CAACW,KAAK,CAACC,YAAY,CAACC,QAAQ,CAAC;QACvC,MAAM,IAAI,CAACC,QAAQ,CAAC,IAAI,CAAC5B,IAAI;QAC7B,IAAI,CAACuB,QAAQ,CAACM,OAAO,CAAC,OAAO;QAC7B,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,QAAQ;MAC5B,EAAE,OAAOT,KAAK,EAAE;QACd,IAAI,CAACC,QAAQ,CAACD,KAAK,CAACA,KAAK,CAACb,OAAO;MACnC,UAAU;QACR,IAAI,CAACK,OAAM,GAAI,KAAI;MACrB;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}