{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"circle-detail-container\"\n};\nconst _hoisted_2 = {\n  class: \"circle-info-card\"\n};\nconst _hoisted_3 = {\n  class: \"description\"\n};\nconst _hoisted_4 = {\n  class: \"member-count\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"actions\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_page_header = _resolveComponent(\"el-page-header\");\n  const _component_el_divider = _resolveComponent(\"el-divider\");\n  const _component_User = _resolveComponent(\"User\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_member_list = _resolveComponent(\"member-list\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_post_list = _resolveComponent(\"post-list\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  const _component_invite_member_form = _resolveComponent(\"invite-member-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _component_create_post_form = _resolveComponent(\"create-post-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_page_header, {\n    onBack: _cache[0] || (_cache[0] = $event => _ctx.$router.go(-1)),\n    content: _ctx.circle.name\n  }, null, 8 /* PROPS */, [\"content\"]), _createVNode(_component_el_divider), _createVNode(_component_el_row, {\n    gutter: 20\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_col, {\n      span: 6\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_cache[6] || (_cache[6] = _createElementVNode(\"h3\", null, \"圈子信息\", -1 /* HOISTED */)), _createElementVNode(\"p\", _hoisted_3, _toDisplayString(_ctx.circle.description || '暂无描述'), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_User)]),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"span\", null, _toDisplayString(_ctx.members.length) + \"名成员\", 1 /* TEXT */)]), $options.isMentor ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode(_component_el_button, {\n        type: \"primary\",\n        size: \"small\",\n        onClick: _cache[1] || (_cache[1] = $event => $data.showInviteDialog = true)\n      }, {\n        default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\" 邀请成员 \")])),\n        _: 1 /* STABLE */,\n        __: [5]\n      })])) : _createCommentVNode(\"v-if\", true)]), _createVNode(_component_member_list, {\n        members: _ctx.members\n      }, null, 8 /* PROPS */, [\"members\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_col, {\n      span: 18\n    }, {\n      default: _withCtx(() => [_createVNode(_component_post_list, {\n        posts: _ctx.posts,\n        loading: _ctx.loadingPosts,\n        onCreatePost: _cache[2] || (_cache[2] = $event => $data.showCreatePostDialog = true)\n      }, null, 8 /* PROPS */, [\"posts\", \"loading\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 邀请成员对话框 \"), _createVNode(_component_el_dialog, {\n    title: \"邀请新成员\",\n    modelValue: $data.showInviteDialog,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.showInviteDialog = $event),\n    width: \"500px\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_invite_member_form, {\n      \"circle-id\": _ctx.circle.id,\n      onSuccess: $options.handleMemberInvited\n    }, null, 8 /* PROPS */, [\"circle-id\", \"onSuccess\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createCommentVNode(\" 创建帖子对话框 \"), _createVNode(_component_el_dialog, {\n    title: \"发表新帖子\",\n    modelValue: $data.showCreatePostDialog,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.showCreatePostDialog = $event),\n    width: \"800px\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_create_post_form, {\n      \"circle-id\": _ctx.circle.id,\n      onSuccess: $options.handlePostCreated\n    }, null, 8 /* PROPS */, [\"circle-id\", \"onSuccess\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createVNode","_component_el_page_header","onBack","_cache","$event","_ctx","$router","go","content","circle","name","_component_el_divider","_component_el_row","gutter","default","_withCtx","_component_el_col","span","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","description","_hoisted_4","_component_el_icon","_component_User","_","members","length","$options","isMentor","_hoisted_5","_component_el_button","type","size","onClick","$data","showInviteDialog","_createTextVNode","__","_createCommentVNode","_component_member_list","_component_post_list","posts","loading","loadingPosts","onCreatePost","showCreatePostDialog","_component_el_dialog","title","modelValue","width","_component_invite_member_form","id","onSuccess","handleMemberInvited","_component_create_post_form","handlePostCreated"],"sources":["E:\\moyun-reading-platform\\frontend\\src\\views\\circles\\CircleDetail.vue"],"sourcesContent":["<template>\r\n    <div class=\"circle-detail-container\">\r\n      <el-page-header @back=\"$router.go(-1)\" :content=\"circle.name\" />\r\n      <el-divider />\r\n      \r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"6\">\r\n          <div class=\"circle-info-card\">\r\n            <h3>圈子信息</h3>\r\n            <p class=\"description\">{{ circle.description || '暂无描述' }}</p>\r\n            <div class=\"member-count\">\r\n              <el-icon><User /></el-icon>\r\n              <span>{{ members.length }}名成员</span>\r\n            </div>\r\n            \r\n            <div class=\"actions\" v-if=\"isMentor\">\r\n              <el-button \r\n                type=\"primary\" \r\n                size=\"small\"\r\n                @click=\"showInviteDialog = true\"\r\n              >\r\n                邀请成员\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n          \r\n          <member-list :members=\"members\" />\r\n        </el-col>\r\n        \r\n        <el-col :span=\"18\">\r\n          <post-list \r\n            :posts=\"posts\" \r\n            :loading=\"loadingPosts\"\r\n            @create-post=\"showCreatePostDialog = true\"\r\n          />\r\n        </el-col>\r\n      </el-row>\r\n      \r\n      <!-- 邀请成员对话框 -->\r\n      <el-dialog \r\n        title=\"邀请新成员\" \r\n        v-model=\"showInviteDialog\"\r\n        width=\"500px\"\r\n      >\r\n        <invite-member-form \r\n          :circle-id=\"circle.id\"\r\n          @success=\"handleMemberInvited\"\r\n        />\r\n      </el-dialog>\r\n      \r\n      <!-- 创建帖子对话框 -->\r\n      <el-dialog \r\n        title=\"发表新帖子\" \r\n        v-model=\"showCreatePostDialog\"\r\n        width=\"800px\"\r\n      >\r\n        <create-post-form \r\n          :circle-id=\"circle.id\"\r\n          @success=\"handlePostCreated\"\r\n        />\r\n      </el-dialog>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { User } from '@element-plus/icons-vue'\r\n  import { mapState, mapActions } from 'vuex'\r\n  import MemberList from '@/components/circle/MemberList.vue'\r\n  import PostList from '@/components/post/PostList.vue'\r\n  import InviteMemberForm from '@/components/circle/InviteMemberForm.vue'\r\n  import CreatePostForm from '@/components/post/CreatePostForm.vue'\r\n  \r\n  export default {\r\n    name: 'CircleDetailView',\r\n    components: {\r\n      User,\r\n      MemberList,\r\n      PostList,\r\n      InviteMemberForm,\r\n      CreatePostForm\r\n    },\r\n    data() {\r\n      return {\r\n        circleId: this.$route.params.id,\r\n        showInviteDialog: false,\r\n        showCreatePostDialog: false\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState('circles', ['circle', 'members', 'loading']),\r\n      ...mapState('posts', ['posts', 'loadingPosts']),\r\n      isMentor() {\r\n        return this.$store.getters['auth/isMentor'] && \r\n               this.circle?.mentor_id === this.$store.state.auth.user.id\r\n      }\r\n    },\r\n    async created() {\r\n      await this.loadCircleData()\r\n    },\r\n    methods: {\r\n      ...mapActions('circles', ['fetchCircleDetail', 'fetchCircleMembers']),\r\n      ...mapActions('posts', ['fetchCirclePosts']),\r\n      \r\n      async loadCircleData() {\r\n        await Promise.all([\r\n          this.fetchCircleDetail(this.circleId),\r\n          this.fetchCircleMembers(this.circleId),\r\n          this.fetchCirclePosts({ circleId: this.circleId })\r\n        ])\r\n      },\r\n      \r\n      handleMemberInvited() {\r\n        this.showInviteDialog = false\r\n        this.fetchCircleMembers(this.circleId)\r\n      },\r\n      \r\n      handlePostCreated(newPost) {\r\n        this.showCreatePostDialog = false\r\n        this.posts.unshift(newPost)\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .circle-detail-container {\r\n    padding: 20px;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n  }\r\n  \r\n  .circle-info-card {\r\n    padding: 20px;\r\n    margin-bottom: 20px;\r\n    background: #fff;\r\n    border-radius: 4px;\r\n    box-shadow: 0 2px 12px 0 rgba(0,0,0,0.1);\r\n  }\r\n  \r\n  .description {\r\n    color: #666;\r\n    margin: 15px 0;\r\n  }\r\n  \r\n  .member-count {\r\n    display: flex;\r\n    align-items: center;\r\n    color: #888;\r\n    font-size: 14px;\r\n  }\r\n  \r\n  .member-count .el-icon {\r\n    margin-right: 5px;\r\n  }\r\n  \r\n  .actions {\r\n    margin-top: 20px;\r\n  }\r\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}