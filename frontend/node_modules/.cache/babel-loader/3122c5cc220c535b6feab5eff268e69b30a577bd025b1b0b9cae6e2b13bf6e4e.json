{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"member-management\"\n};\nconst _hoisted_2 = {\n  class: \"card-header\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_bulk_invite_form = _resolveComponent(\"bulk-invite-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, null, {\n    header: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_cache[3] || (_cache[3] = _createElementVNode(\"span\", null, \"成员管理\", -1 /* HOISTED */)), _createVNode(_component_el_button, {\n      type: \"primary\",\n      size: \"small\",\n      onClick: _cache[0] || (_cache[0] = $event => $data.showInviteDialog = true)\n    }, {\n      default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\" 批量导入 \")])),\n      _: 1 /* STABLE */,\n      __: [2]\n    })])]),\n    default: _withCtx(() => [_withDirectives((_openBlock(), _createBlock(_component_el_table, {\n      data: _ctx.members\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"username\",\n        label: \"用户名\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"email\",\n        label: \"邮箱\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"role\",\n        label: \"角色\"\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_createVNode(_component_el_tag, {\n          type: $options.roleTagType(row.role)\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString($options.roleText(row.role)), 1 /* TEXT */)]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\",\n        width: \"180\"\n      }, {\n        default: _withCtx(({\n          row\n        }) => [row.id !== _ctx.user.id ? (_openBlock(), _createBlock(_component_el_button, {\n          key: 0,\n          size: \"small\",\n          type: \"danger\",\n          onClick: $event => $options.handleRemove(row.id)\n        }, {\n          default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\" 移除 \")])),\n          _: 2 /* DYNAMIC */,\n          __: [4]\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true)]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"])), [[_directive_loading, $data.loading]])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_dialog, {\n    title: \"批量导入成员\",\n    modelValue: $data.showInviteDialog,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.showInviteDialog = $event),\n    width: \"600px\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_bulk_invite_form, {\n      \"circle-id\": $props.circleId,\n      onSuccess: $options.handleBulkInviteSuccess\n    }, null, 8 /* PROPS */, [\"circle-id\", \"onSuccess\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","header","_withCtx","_createElementVNode","_hoisted_2","_component_el_button","type","size","onClick","_cache","$event","$data","showInviteDialog","default","_createTextVNode","_","__","_createBlock","_component_el_table","data","_ctx","members","_component_el_table_column","prop","label","row","_component_el_tag","$options","roleTagType","role","_toDisplayString","roleText","width","id","user","key","handleRemove","_createCommentVNode","loading","_component_el_dialog","title","modelValue","_component_bulk_invite_form","$props","circleId","onSuccess","handleBulkInviteSuccess"],"sources":["C:\\Users\\仲佳泽\\Desktop\\大学作业\\软件工程\\moyun-reading-platform\\frontend\\src\\views\\circles\\MemberManagement.vue"],"sourcesContent":["<template>\r\n    <div class=\"member-management\">\r\n      <el-card>\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <span>成员管理</span>\r\n            <el-button \r\n              type=\"primary\" \r\n              size=\"small\"\r\n              @click=\"showInviteDialog = true\"\r\n            >\r\n              批量导入\r\n            </el-button>\r\n          </div>\r\n        </template>\r\n        \r\n        <el-table :data=\"members\" v-loading=\"loading\">\r\n          <el-table-column prop=\"username\" label=\"用户名\" />\r\n          <el-table-column prop=\"email\" label=\"邮箱\" />\r\n          <el-table-column prop=\"role\" label=\"角色\">\r\n            <template #default=\"{row}\">\r\n              <el-tag :type=\"roleTagType(row.role)\">\r\n                {{ roleText(row.role) }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"180\">\r\n            <template #default=\"{row}\">\r\n              <el-button \r\n                size=\"small\" \r\n                type=\"danger\"\r\n                @click=\"handleRemove(row.id)\"\r\n                v-if=\"row.id !== user.id\"\r\n              >\r\n                移除\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-card>\r\n      \r\n      <el-dialog \r\n        title=\"批量导入成员\" \r\n        v-model=\"showInviteDialog\"\r\n        width=\"600px\"\r\n      >\r\n        <bulk-invite-form \r\n          :circle-id=\"circleId\"\r\n          @success=\"handleBulkInviteSuccess\"\r\n        />\r\n      </el-dialog>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { mapState } from 'vuex'\r\n  \r\n  export default {\r\n    name: 'MemberManagementView',\r\n    props: {\r\n      circleId: {\r\n        type: String,\r\n        required: true\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        showInviteDialog: false,\r\n        loading: false\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState('circles', ['members']),\r\n      ...mapState('auth', ['user'])\r\n    },\r\n    methods: {\r\n      roleText(role) {\r\n        const roles = {\r\n          student: '学生',\r\n          mentor: '导师',\r\n          admin: '管理员'\r\n        }\r\n        return roles[role] || role\r\n      },\r\n      roleTagType(role) {\r\n        const types = {\r\n          student: '',\r\n          mentor: 'warning',\r\n          admin: 'danger'\r\n        }\r\n        return types[role] || ''\r\n      },\r\n      async handleRemove(memberId) {\r\n        try {\r\n          await this.$confirm('确定移除此成员吗？', '提示', {\r\n            type: 'warning'\r\n          })\r\n          await this.$store.dispatch('circles/removeMember', {\r\n            circleId: this.circleId,\r\n            memberId\r\n          })\r\n          this.$message.success('成员已移除')\r\n        } catch (error) {\r\n          if (error !== 'cancel') {\r\n            this.$message.error(error.message)\r\n          }\r\n        }\r\n      },\r\n      handleBulkInviteSuccess() {\r\n        this.showInviteDialog = false\r\n        this.$store.dispatch('circles/fetchCircleMembers', this.circleId)\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .card-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n  </style>"],"mappings":";;EACSA,KAAK,EAAC;AAAmB;;EAGnBA,KAAK,EAAC;AAAa;;;;;;;;;;uBAH9BC,mBAAA,CAkDM,OAlDNC,UAkDM,GAjDJC,YAAA,CAqCUC,kBAAA;IApCGC,MAAM,EAAAC,QAAA,CACf,MASM,CATNC,mBAAA,CASM,OATNC,UASM,G,0BARJD,mBAAA,CAAiB,cAAX,MAAI,sBACVJ,YAAA,CAMYM,oBAAA;MALVC,IAAI,EAAC,SAAS;MACdC,IAAI,EAAC,OAAO;MACXC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,KAAA,CAAAC,gBAAgB;;MATtCC,OAAA,EAAAX,QAAA,CAUa,MAEDO,MAAA,QAAAA,MAAA,OAZZK,gBAAA,CAUa,QAED,E;MAZZC,CAAA;MAAAC,EAAA;;IAAAH,OAAA,EAAAX,QAAA,CAgBQ,MAsBW,C,+BAtBXe,YAAA,CAsBWC,mBAAA;MAtBAC,IAAI,EAAEC,IAAA,CAAAC;IAAO;MAhBhCR,OAAA,EAAAX,QAAA,CAiBU,MAA+C,CAA/CH,YAAA,CAA+CuB,0BAAA;QAA9BC,IAAI,EAAC,UAAU;QAACC,KAAK,EAAC;UACvCzB,YAAA,CAA2CuB,0BAAA;QAA1BC,IAAI,EAAC,OAAO;QAACC,KAAK,EAAC;UACpCzB,YAAA,CAMkBuB,0BAAA;QANDC,IAAI,EAAC,MAAM;QAACC,KAAK,EAAC;;QACtBX,OAAO,EAAAX,QAAA,CAChB,CAES;UAHUuB;QAAG,OACtB1B,YAAA,CAES2B,iBAAA;UAFApB,IAAI,EAAEqB,QAAA,CAAAC,WAAW,CAACH,GAAG,CAACI,IAAI;;UArBjDhB,OAAA,EAAAX,QAAA,CAsBgB,MAAwB,CAtBxCY,gBAAA,CAAAgB,gBAAA,CAsBmBH,QAAA,CAAAI,QAAQ,CAACN,GAAG,CAACI,IAAI,kB;UAtBpCd,CAAA;;QAAAA,CAAA;UA0BUhB,YAAA,CAWkBuB,0BAAA;QAXDE,KAAK,EAAC,IAAI;QAACQ,KAAK,EAAC;;QACrBnB,OAAO,EAAAX,QAAA,CAFN,CAQtB;UAN+BuB;QAAG,OAKdA,GAAG,CAACQ,EAAE,KAAKb,IAAA,CAAAc,IAAI,CAACD,EAAE,I,cAJ1BhB,YAAA,CAOYZ,oBAAA;UAnC1B8B,GAAA;UA6BgB5B,IAAI,EAAC,OAAO;UACZD,IAAI,EAAC,QAAQ;UACZE,OAAK,EAAAE,MAAA,IAAEiB,QAAA,CAAAS,YAAY,CAACX,GAAG,CAACQ,EAAE;;UA/B3CpB,OAAA,EAAAX,QAAA,CAiCe,MAEDO,MAAA,QAAAA,MAAA,OAnCdK,gBAAA,CAiCe,MAED,E;UAnCdC,CAAA;UAAAC,EAAA;4DAAAqB,mBAAA,e;QAAAtB,CAAA;;MAAAA,CAAA;wDAgB6CJ,KAAA,CAAA2B,OAAO,E;IAhBpDvB,CAAA;MAyCMhB,YAAA,CASYwC,oBAAA;IARVC,KAAK,EAAC,QAAQ;IA1CtBC,UAAA,EA2CiB9B,KAAA,CAAAC,gBAAgB;IA3CjC,uBAAAH,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA2CiBC,KAAA,CAAAC,gBAAgB,GAAAF,MAAA;IACzBsB,KAAK,EAAC;;IA5CdnB,OAAA,EAAAX,QAAA,CA8CQ,MAGE,CAHFH,YAAA,CAGE2C,2BAAA;MAFC,WAAS,EAAEC,MAAA,CAAAC,QAAQ;MACnBC,SAAO,EAAElB,QAAA,CAAAmB;;IAhDpB/B,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}