{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport BookAPI from '@/api/books';\nconst state = {\n  books: [],\n  currentBook: null,\n  loading: false,\n  error: null\n};\nconst mutations = {\n  SET_BOOKS(state, books) {\n    state.books = books;\n  },\n  SET_CURRENT_BOOK(state, book) {\n    state.currentBook = book;\n  },\n  SET_LOADING(state, isLoading) {\n    state.loading = isLoading;\n  },\n  SET_ERROR(state, error) {\n    state.error = error;\n  },\n  ADD_BOOK(state, book) {\n    state.books.unshift(book);\n  }\n};\nconst actions = {\n  // 获取所有书籍\n  async fetchBooks({\n    commit\n  }, params = {}) {\n    commit('SET_LOADING', true);\n    try {\n      const books = await BookAPI.getAll(params);\n      commit('SET_BOOKS', books);\n      commit('SET_ERROR', null);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  // 获取书籍详情\n  async fetchBookDetail({\n    commit\n  }, bookId) {\n    commit('SET_LOADING', true);\n    try {\n      const book = await BookAPI.getDetail(bookId);\n      commit('SET_CURRENT_BOOK', book);\n      commit('SET_ERROR', null);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  // 推荐新书\n  async recommendBook({\n    commit\n  }, bookData) {\n    commit('SET_LOADING', true);\n    try {\n      const newBook = await BookAPI.recommendBook(bookData);\n      commit('ADD_BOOK', newBook);\n      commit('SET_ERROR', null);\n      return newBook;\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  }\n};\nconst getters = {\n  recommendedBooks: state => state.books.filter(book => book.recommender_id === state.user?.id)\n};\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters\n};","map":{"version":3,"names":["BookAPI","state","books","currentBook","loading","error","mutations","SET_BOOKS","SET_CURRENT_BOOK","book","SET_LOADING","isLoading","SET_ERROR","ADD_BOOK","unshift","actions","fetchBooks","commit","params","getAll","message","fetchBookDetail","bookId","getDetail","recommendBook","bookData","newBook","getters","recommendedBooks","filter","recommender_id","user","id","namespaced"],"sources":["C:/Users/仲佳泽/Desktop/大学作业/软件工程/moyun-reading-platform/frontend/src/store/modules/books.js"],"sourcesContent":["import BookAPI from '@/api/books'\r\n\r\nconst state = {\r\n  books: [],\r\n  currentBook: null,\r\n  loading: false,\r\n  error: null\r\n}\r\n\r\nconst mutations = {\r\n  SET_BOOKS(state, books) {\r\n    state.books = books\r\n  },\r\n  SET_CURRENT_BOOK(state, book) {\r\n    state.currentBook = book\r\n  },\r\n  SET_LOADING(state, isLoading) {\r\n    state.loading = isLoading\r\n  },\r\n  SET_ERROR(state, error) {\r\n    state.error = error\r\n  },\r\n  ADD_BOOK(state, book) {\r\n    state.books.unshift(book)\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // 获取所有书籍\r\n  async fetchBooks({ commit }, params = {}) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const books = await BookAPI.getAll(params)\r\n      commit('SET_BOOKS', books)\r\n      commit('SET_ERROR', null)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  // 获取书籍详情\r\n  async fetchBookDetail({ commit }, bookId) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const book = await BookAPI.getDetail(bookId)\r\n      commit('SET_CURRENT_BOOK', book)\r\n      commit('SET_ERROR', null)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  // 推荐新书\r\n  async recommendBook({ commit }, bookData) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const newBook = await BookAPI.recommendBook(bookData)\r\n      commit('ADD_BOOK', newBook)\r\n      commit('SET_ERROR', null)\r\n      return newBook\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n      throw error\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  }\r\n}\r\n\r\nconst getters = {\r\n  recommendedBooks: state => \r\n    state.books.filter(book => book.recommender_id === state.user?.id)\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions,\r\n  getters\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}