{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport CircleAPI from '@/api/circles';\nconst state = {\n  currentCircle: null,\n  members: [],\n  loading: false,\n  error: null\n};\nconst mutations = {\n  SET_CIRCLE(state, circle) {\n    state.currentCircle = circle;\n  },\n  SET_MEMBERS(state, members) {\n    state.members = members;\n  },\n  ADD_MEMBER(state, member) {\n    state.members.push(member);\n  },\n  SET_LOADING(state, isLoading) {\n    state.loading = isLoading;\n  },\n  SET_ERROR(state, error) {\n    state.error = error;\n  }\n};\nconst actions = {\n  // 获取我的圈子\n  async fetchMyCircle({\n    commit,\n    rootState\n  }) {\n    commit('SET_LOADING', true);\n    try {\n      const circle = await CircleAPI.getMyCircle();\n      commit('SET_CIRCLE', circle);\n\n      // 获取成员列表\n      const members = await CircleAPI.getMembers(circle.id);\n      commit('SET_MEMBERS', members);\n      commit('SET_ERROR', null);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  // 添加成员\n  async addMember({\n    commit\n  }, {\n    circleId,\n    userId\n  }) {\n    commit('SET_LOADING', true);\n    try {\n      await CircleAPI.addMember(circleId, userId);\n      const members = await CircleAPI.getMembers(circleId);\n      commit('SET_MEMBERS', members);\n      commit('SET_ERROR', null);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  }\n};\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n};","map":{"version":3,"names":["CircleAPI","state","currentCircle","members","loading","error","mutations","SET_CIRCLE","circle","SET_MEMBERS","ADD_MEMBER","member","push","SET_LOADING","isLoading","SET_ERROR","actions","fetchMyCircle","commit","rootState","getMyCircle","getMembers","id","message","addMember","circleId","userId","namespaced"],"sources":["C:/Users/仲佳泽/Desktop/大学作业/软件工程/moyun-reading-platform/frontend/src/store/modules/circles.js"],"sourcesContent":["import CircleAPI from '@/api/circles'\r\n\r\nconst state = {\r\n  currentCircle: null,\r\n  members: [],\r\n  loading: false,\r\n  error: null\r\n}\r\n\r\nconst mutations = {\r\n  SET_CIRCLE(state, circle) {\r\n    state.currentCircle = circle\r\n  },\r\n  SET_MEMBERS(state, members) {\r\n    state.members = members\r\n  },\r\n  ADD_MEMBER(state, member) {\r\n    state.members.push(member)\r\n  },\r\n  SET_LOADING(state, isLoading) {\r\n    state.loading = isLoading\r\n  },\r\n  SET_ERROR(state, error) {\r\n    state.error = error\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // 获取我的圈子\r\n  async fetchMyCircle({ commit, rootState }) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const circle = await CircleAPI.getMyCircle()\r\n      commit('SET_CIRCLE', circle)\r\n      \r\n      // 获取成员列表\r\n      const members = await CircleAPI.getMembers(circle.id)\r\n      commit('SET_MEMBERS', members)\r\n      \r\n      commit('SET_ERROR', null)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  // 添加成员\r\n  async addMember({ commit }, { circleId, userId }) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      await CircleAPI.addMember(circleId, userId)\r\n      const members = await CircleAPI.getMembers(circleId)\r\n      commit('SET_MEMBERS', members)\r\n      commit('SET_ERROR', null)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n      throw error\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}"],"mappings":";AAAA,OAAOA,SAAS,MAAM,eAAe;AAErC,MAAMC,KAAK,GAAG;EACZC,aAAa,EAAE,IAAI;EACnBC,OAAO,EAAE,EAAE;EACXC,OAAO,EAAE,KAAK;EACdC,KAAK,EAAE;AACT,CAAC;AAED,MAAMC,SAAS,GAAG;EAChBC,UAAUA,CAACN,KAAK,EAAEO,MAAM,EAAE;IACxBP,KAAK,CAACC,aAAa,GAAGM,MAAM;EAC9B,CAAC;EACDC,WAAWA,CAACR,KAAK,EAAEE,OAAO,EAAE;IAC1BF,KAAK,CAACE,OAAO,GAAGA,OAAO;EACzB,CAAC;EACDO,UAAUA,CAACT,KAAK,EAAEU,MAAM,EAAE;IACxBV,KAAK,CAACE,OAAO,CAACS,IAAI,CAACD,MAAM,CAAC;EAC5B,CAAC;EACDE,WAAWA,CAACZ,KAAK,EAAEa,SAAS,EAAE;IAC5Bb,KAAK,CAACG,OAAO,GAAGU,SAAS;EAC3B,CAAC;EACDC,SAASA,CAACd,KAAK,EAAEI,KAAK,EAAE;IACtBJ,KAAK,CAACI,KAAK,GAAGA,KAAK;EACrB;AACF,CAAC;AAED,MAAMW,OAAO,GAAG;EACd;EACA,MAAMC,aAAaA,CAAC;IAAEC,MAAM;IAAEC;EAAU,CAAC,EAAE;IACzCD,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC;IAC3B,IAAI;MACF,MAAMV,MAAM,GAAG,MAAMR,SAAS,CAACoB,WAAW,CAAC,CAAC;MAC5CF,MAAM,CAAC,YAAY,EAAEV,MAAM,CAAC;;MAE5B;MACA,MAAML,OAAO,GAAG,MAAMH,SAAS,CAACqB,UAAU,CAACb,MAAM,CAACc,EAAE,CAAC;MACrDJ,MAAM,CAAC,aAAa,EAAEf,OAAO,CAAC;MAE9Be,MAAM,CAAC,WAAW,EAAE,IAAI,CAAC;IAC3B,CAAC,CAAC,OAAOb,KAAK,EAAE;MACda,MAAM,CAAC,WAAW,EAAEb,KAAK,CAACkB,OAAO,CAAC;IACpC,CAAC,SAAS;MACRL,MAAM,CAAC,aAAa,EAAE,KAAK,CAAC;IAC9B;EACF,CAAC;EAED;EACA,MAAMM,SAASA,CAAC;IAAEN;EAAO,CAAC,EAAE;IAAEO,QAAQ;IAAEC;EAAO,CAAC,EAAE;IAChDR,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC;IAC3B,IAAI;MACF,MAAMlB,SAAS,CAACwB,SAAS,CAACC,QAAQ,EAAEC,MAAM,CAAC;MAC3C,MAAMvB,OAAO,GAAG,MAAMH,SAAS,CAACqB,UAAU,CAACI,QAAQ,CAAC;MACpDP,MAAM,CAAC,aAAa,EAAEf,OAAO,CAAC;MAC9Be,MAAM,CAAC,WAAW,EAAE,IAAI,CAAC;IAC3B,CAAC,CAAC,OAAOb,KAAK,EAAE;MACda,MAAM,CAAC,WAAW,EAAEb,KAAK,CAACkB,OAAO,CAAC;MAClC,MAAMlB,KAAK;IACb,CAAC,SAAS;MACRa,MAAM,CAAC,aAAa,EAAE,KAAK,CAAC;IAC9B;EACF;AACF,CAAC;AAED,eAAe;EACbS,UAAU,EAAE,IAAI;EAChB1B,KAAK;EACLK,SAAS;EACTU;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}