{"ast":null,"code":"import { mapState } from 'vuex';\nexport default {\n  name: 'MemberManagementView',\n  props: {\n    circleId: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      showInviteDialog: false,\n      loading: false\n    };\n  },\n  computed: {\n    ...mapState('circles', ['members']),\n    ...mapState('auth', ['user'])\n  },\n  methods: {\n    roleText(role) {\n      const roles = {\n        student: '学生',\n        mentor: '导师',\n        admin: '管理员'\n      };\n      return roles[role] || role;\n    },\n    roleTagType(role) {\n      const types = {\n        student: '',\n        mentor: 'warning',\n        admin: 'danger'\n      };\n      return types[role] || '';\n    },\n    async handleRemove(memberId) {\n      try {\n        await this.$confirm('确定移除此成员吗？', '提示', {\n          type: 'warning'\n        });\n        await this.$store.dispatch('circles/removeMember', {\n          circleId: this.circleId,\n          memberId\n        });\n        this.$message.success('成员已移除');\n      } catch (error) {\n        if (error !== 'cancel') {\n          this.$message.error(error.message);\n        }\n      }\n    },\n    handleBulkInviteSuccess() {\n      this.showInviteDialog = false;\n      this.$store.dispatch('circles/fetchCircleMembers', this.circleId);\n    }\n  }\n};","map":{"version":3,"names":["mapState","name","props","circleId","type","String","required","data","showInviteDialog","loading","computed","methods","roleText","role","roles","student","mentor","admin","roleTagType","types","handleRemove","memberId","$confirm","$store","dispatch","$message","success","error","message","handleBulkInviteSuccess"],"sources":["E:\\moyun-reading-platform\\frontend\\src\\views\\circles\\MemberManagement.vue"],"sourcesContent":["<template>\r\n    <div class=\"member-management\">\r\n      <el-card>\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <span>成员管理</span>\r\n            <el-button \r\n              type=\"primary\" \r\n              size=\"small\"\r\n              @click=\"showInviteDialog = true\"\r\n            >\r\n              批量导入\r\n            </el-button>\r\n          </div>\r\n        </template>\r\n        \r\n        <el-table :data=\"members\" v-loading=\"loading\">\r\n          <el-table-column prop=\"username\" label=\"用户名\" />\r\n          <el-table-column prop=\"email\" label=\"邮箱\" />\r\n          <el-table-column prop=\"role\" label=\"角色\">\r\n            <template #default=\"{row}\">\r\n              <el-tag :type=\"roleTagType(row.role)\">\r\n                {{ roleText(row.role) }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"180\">\r\n            <template #default=\"{row}\">\r\n              <el-button \r\n                size=\"small\" \r\n                type=\"danger\"\r\n                @click=\"handleRemove(row.id)\"\r\n                v-if=\"row.id !== user.id\"\r\n              >\r\n                移除\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-card>\r\n      \r\n      <el-dialog \r\n        title=\"批量导入成员\" \r\n        v-model=\"showInviteDialog\"\r\n        width=\"600px\"\r\n      >\r\n        <bulk-invite-form \r\n          :circle-id=\"circleId\"\r\n          @success=\"handleBulkInviteSuccess\"\r\n        />\r\n      </el-dialog>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { mapState } from 'vuex'\r\n  \r\n  export default {\r\n    name: 'MemberManagementView',\r\n    props: {\r\n      circleId: {\r\n        type: String,\r\n        required: true\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        showInviteDialog: false,\r\n        loading: false\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState('circles', ['members']),\r\n      ...mapState('auth', ['user'])\r\n    },\r\n    methods: {\r\n      roleText(role) {\r\n        const roles = {\r\n          student: '学生',\r\n          mentor: '导师',\r\n          admin: '管理员'\r\n        }\r\n        return roles[role] || role\r\n      },\r\n      roleTagType(role) {\r\n        const types = {\r\n          student: '',\r\n          mentor: 'warning',\r\n          admin: 'danger'\r\n        }\r\n        return types[role] || ''\r\n      },\r\n      async handleRemove(memberId) {\r\n        try {\r\n          await this.$confirm('确定移除此成员吗？', '提示', {\r\n            type: 'warning'\r\n          })\r\n          await this.$store.dispatch('circles/removeMember', {\r\n            circleId: this.circleId,\r\n            memberId\r\n          })\r\n          this.$message.success('成员已移除')\r\n        } catch (error) {\r\n          if (error !== 'cancel') {\r\n            this.$message.error(error.message)\r\n          }\r\n        }\r\n      },\r\n      handleBulkInviteSuccess() {\r\n        this.showInviteDialog = false\r\n        this.$store.dispatch('circles/fetchCircleMembers', this.circleId)\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .card-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n  </style>"],"mappings":"AAuDE,SAASA,QAAO,QAAS,MAAK;AAE9B,eAAe;EACbC,IAAI,EAAE,sBAAsB;EAC5BC,KAAK,EAAE;IACLC,QAAQ,EAAE;MACRC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,gBAAgB,EAAE,KAAK;MACvBC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGV,QAAQ,CAAC,SAAS,EAAE,CAAC,SAAS,CAAC,CAAC;IACnC,GAAGA,QAAQ,CAAC,MAAM,EAAE,CAAC,MAAM,CAAC;EAC9B,CAAC;EACDW,OAAO,EAAE;IACPC,QAAQA,CAACC,IAAI,EAAE;MACb,MAAMC,KAAI,GAAI;QACZC,OAAO,EAAE,IAAI;QACbC,MAAM,EAAE,IAAI;QACZC,KAAK,EAAE;MACT;MACA,OAAOH,KAAK,CAACD,IAAI,KAAKA,IAAG;IAC3B,CAAC;IACDK,WAAWA,CAACL,IAAI,EAAE;MAChB,MAAMM,KAAI,GAAI;QACZJ,OAAO,EAAE,EAAE;QACXC,MAAM,EAAE,SAAS;QACjBC,KAAK,EAAE;MACT;MACA,OAAOE,KAAK,CAACN,IAAI,KAAK,EAAC;IACzB,CAAC;IACD,MAAMO,YAAYA,CAACC,QAAQ,EAAE;MAC3B,IAAI;QACF,MAAM,IAAI,CAACC,QAAQ,CAAC,WAAW,EAAE,IAAI,EAAE;UACrClB,IAAI,EAAE;QACR,CAAC;QACD,MAAM,IAAI,CAACmB,MAAM,CAACC,QAAQ,CAAC,sBAAsB,EAAE;UACjDrB,QAAQ,EAAE,IAAI,CAACA,QAAQ;UACvBkB;QACF,CAAC;QACD,IAAI,CAACI,QAAQ,CAACC,OAAO,CAAC,OAAO;MAC/B,EAAE,OAAOC,KAAK,EAAE;QACd,IAAIA,KAAI,KAAM,QAAQ,EAAE;UACtB,IAAI,CAACF,QAAQ,CAACE,KAAK,CAACA,KAAK,CAACC,OAAO;QACnC;MACF;IACF,CAAC;IACDC,uBAAuBA,CAAA,EAAG;MACxB,IAAI,CAACrB,gBAAe,GAAI,KAAI;MAC5B,IAAI,CAACe,MAAM,CAACC,QAAQ,CAAC,4BAA4B,EAAE,IAAI,CAACrB,QAAQ;IAClE;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}