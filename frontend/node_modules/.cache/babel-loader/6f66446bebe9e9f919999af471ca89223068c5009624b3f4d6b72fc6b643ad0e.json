{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, Fragment as _Fragment, createElementBlock as _createElementBlock, resolveDirective as _resolveDirective, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"book-detail-container\"\n};\nconst _hoisted_2 = {\n  class: \"book-cover\"\n};\nconst _hoisted_3 = [\"src\", \"alt\"];\nconst _hoisted_4 = {\n  class: \"book-info\"\n};\nconst _hoisted_5 = {\n  class: \"author\"\n};\nconst _hoisted_6 = {\n  class: \"recommender\"\n};\nconst _hoisted_7 = {\n  class: \"description\"\n};\nconst _hoisted_8 = {\n  class: \"actions\"\n};\nconst _hoisted_9 = {\n  class: \"related-posts\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_alert = _resolveComponent(\"el-alert\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_el_divider = _resolveComponent(\"el-divider\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  const _component_post_list = _resolveComponent(\"post-list\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_ctx.error ? (_openBlock(), _createBlock(_component_el_alert, {\n    key: 0,\n    title: _ctx.error,\n    type: \"error\",\n    \"show-icon\": \"\",\n    closable: false\n  }, null, 8 /* PROPS */, [\"title\"])) : $options.book ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createVNode(_component_el_row, {\n    gutter: 20\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_col, {\n      span: 6\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"img\", {\n        src: $options.book?.cover_url || $data.defaultCover,\n        alt: $options.book?.title || '书籍封面'\n      }, null, 8 /* PROPS */, _hoisted_3)])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_col, {\n      span: 18\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h2\", null, _toDisplayString($options.book?.title || '未知书名'), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_5, \"作者: \" + _toDisplayString($options.book?.author || '未知作者'), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_6, \"推荐人: \" + _toDisplayString($options.book?.recommender_name || '未知推荐人'), 1 /* TEXT */), _createVNode(_component_el_divider), _createElementVNode(\"div\", _hoisted_7, [_cache[1] || (_cache[1] = _createElementVNode(\"h3\", null, \"内容简介\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($options.book?.description || '暂无简介'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: _cache[0] || (_cache[0] = $event => $options.goToCreatePost($options.book.id))\n      }, {\n        default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\" 发表读后感 \")])),\n        _: 1 /* STABLE */,\n        __: [2]\n      })])])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_divider), _createElementVNode(\"div\", _hoisted_9, [_cache[3] || (_cache[3] = _createElementVNode(\"h3\", null, \"相关读后感\", -1 /* HOISTED */)), _createVNode(_component_post_list, {\n    posts: _ctx.posts\n  }, null, 8 /* PROPS */, [\"posts\"])])], 64 /* STABLE_FRAGMENT */)) : (_openBlock(), _createBlock(_component_el_empty, {\n    key: 2,\n    description: \"未找到书籍信息\"\n  }))])), [[_directive_loading, _ctx.loading]]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_ctx","error","_createBlock","_component_el_alert","key","title","type","closable","$options","book","_Fragment","_createVNode","_component_el_row","gutter","default","_withCtx","_component_el_col","span","_createElementVNode","_hoisted_2","src","cover_url","$data","defaultCover","alt","_hoisted_3","_","_hoisted_4","_toDisplayString","_hoisted_5","author","_hoisted_6","recommender_name","_component_el_divider","_hoisted_7","description","_hoisted_8","_component_el_button","onClick","_cache","$event","goToCreatePost","id","_createTextVNode","__","_hoisted_9","_component_post_list","posts","_component_el_empty","loading"],"sources":["C:\\Users\\仲佳泽\\Desktop\\大学作业\\软件工程\\moyun-reading-platform\\frontend\\src\\views\\books\\BookDetail.vue"],"sourcesContent":["<template>\r\n    <div class=\"book-detail-container\" v-loading=\"loading\">\r\n      <template v-if=\"error\">\r\n        <el-alert\r\n          :title=\"error\"\r\n          type=\"error\"\r\n          show-icon\r\n          :closable=\"false\"\r\n        />\r\n      </template>\r\n      <template v-else-if=\"book\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"6\">\r\n            <div class=\"book-cover\">\r\n              <img :src=\"book?.cover_url || defaultCover\" :alt=\"book?.title || '书籍封面'\">\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"18\">\r\n            <div class=\"book-info\">\r\n              <h2>{{ book?.title || '未知书名' }}</h2>\r\n              <p class=\"author\">作者: {{ book?.author || '未知作者' }}</p>\r\n              <p class=\"recommender\">推荐人: {{ book?.recommender_name || '未知推荐人' }}</p>\r\n              \r\n              <el-divider />\r\n              \r\n              <div class=\"description\">\r\n                <h3>内容简介</h3>\r\n                <p>{{ book?.description || '暂无简介' }}</p>\r\n              </div>\r\n              \r\n              <div class=\"actions\">\r\n                <el-button \r\n                  type=\"primary\" \r\n                  @click=\"goToCreatePost(book.id)\"\r\n                >\r\n                  发表读后感\r\n                </el-button>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n        \r\n        <el-divider />\r\n        \r\n        <div class=\"related-posts\">\r\n          <h3>相关读后感</h3>\r\n          <post-list :posts=\"posts\" />\r\n        </div>\r\n      </template>\r\n      <template v-else>\r\n        <el-empty description=\"未找到书籍信息\" />\r\n      </template>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { mapState, mapActions } from 'vuex'\r\n  import PostList from '@/components/PostList.vue'\r\n  import defaultCover from '@/assets/default-book-cover.jpg'\r\n  \r\n  export default {\r\n    name: 'BookDetailView',\r\n    components: { PostList },\r\n    data() {\r\n      return {\r\n        defaultCover,\r\n        bookId: this.$route.params.id\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState('books', ['currentBook', 'loading', 'error']),\r\n      ...mapState('posts', ['posts']),\r\n      book() {\r\n        return this.currentBook\r\n      }\r\n    },\r\n    async created() {\r\n      try {\r\n        await Promise.all([\r\n          this.fetchBookDetail(this.bookId),\r\n          this.fetchRelatedPosts(this.bookId)\r\n        ])\r\n      } catch (error) {\r\n        console.error('获取书籍详情失败:', error)\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapActions('books', ['fetchBookDetail']),\r\n      ...mapActions('posts', ['fetchRelatedPosts']),\r\n      goToCreatePost(bookId) {\r\n        if (bookId) {\r\n          this.$router.push({\r\n            path: '/posts/create',\r\n            query: { bookId }\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .book-detail-container {\r\n    padding: 20px;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n  }\r\n  \r\n  .book-cover img {\r\n    width: 100%;\r\n    max-height: 300px;\r\n    object-fit: cover;\r\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .book-info h2 {\r\n    margin-top: 0;\r\n  }\r\n  \r\n  .author, .recommender {\r\n    color: #666;\r\n    margin: 5px 0;\r\n  }\r\n  \r\n  .description {\r\n    margin: 20px 0;\r\n  }\r\n  \r\n  .actions {\r\n    margin-top: 30px;\r\n  }\r\n  \r\n  .related-posts {\r\n    margin-top: 40px;\r\n  }\r\n  </style>"],"mappings":";;EACSA,KAAK,EAAC;AAAuB;;EAYrBA,KAAK,EAAC;AAAY;mBAbnC;;EAkBiBA,KAAK,EAAC;AAAW;;EAEjBA,KAAK,EAAC;AAAQ;;EACdA,KAAK,EAAC;AAAa;;EAIjBA,KAAK,EAAC;AAAa;;EAKnBA,KAAK,EAAC;AAAS;;EAcrBA,KAAK,EAAC;AAAe;;;;;;;;;;wCA3C9BC,mBAAA,CAmDM,OAnDNC,UAmDM,GAlDYC,IAAA,CAAAC,KAAK,I,cACnBC,YAAA,CAKEC,mBAAA;IARVC,GAAA;IAIWC,KAAK,EAAEL,IAAA,CAAAC,KAAK;IACbK,IAAI,EAAC,OAAO;IACZ,WAAS,EAAT,EAAS;IACRC,QAAQ,EAAE;wCAGMC,QAAA,CAAAC,IAAI,I,cAAzBX,mBAAA,CAsCWY,SAAA;IAhDjBN,GAAA;EAAA,IAWQO,YAAA,CA6BSC,iBAAA;IA7BAC,MAAM,EAAE;EAAE;IAX3BC,OAAA,EAAAC,QAAA,CAYU,MAIS,CAJTJ,YAAA,CAISK,iBAAA;MAJAC,IAAI,EAAE;IAAC;MAZ1BH,OAAA,EAAAC,QAAA,CAaY,MAEM,CAFNG,mBAAA,CAEM,OAFNC,UAEM,GADJD,mBAAA,CAAyE;QAAnEE,GAAG,EAAEZ,QAAA,CAAAC,IAAI,EAAEY,SAAS,IAAIC,KAAA,CAAAC,YAAY;QAAGC,GAAG,EAAEhB,QAAA,CAAAC,IAAI,EAAEJ,KAAK;8BAd3EoB,UAAA,E;MAAAC,CAAA;QAiBUf,YAAA,CAsBSK,iBAAA;MAtBAC,IAAI,EAAE;IAAE;MAjB3BH,OAAA,EAAAC,QAAA,CAkBY,MAoBM,CApBNG,mBAAA,CAoBM,OApBNS,UAoBM,GAnBJT,mBAAA,CAAoC,YAAAU,gBAAA,CAA7BpB,QAAA,CAAAC,IAAI,EAAEJ,KAAK,4BAClBa,mBAAA,CAAsD,KAAtDW,UAAsD,EAApC,MAAI,GAAAD,gBAAA,CAAGpB,QAAA,CAAAC,IAAI,EAAEqB,MAAM,4BACrCZ,mBAAA,CAAuE,KAAvEa,UAAuE,EAAhD,OAAK,GAAAH,gBAAA,CAAGpB,QAAA,CAAAC,IAAI,EAAEuB,gBAAgB,6BAErDrB,YAAA,CAAcsB,qBAAA,GAEdf,mBAAA,CAGM,OAHNgB,UAGM,G,0BAFJhB,mBAAA,CAAa,YAAT,MAAI,sBACRA,mBAAA,CAAwC,WAAAU,gBAAA,CAAlCpB,QAAA,CAAAC,IAAI,EAAE0B,WAAW,2B,GAGzBjB,mBAAA,CAOM,OAPNkB,UAOM,GANJzB,YAAA,CAKY0B,oBAAA;QAJV/B,IAAI,EAAC,SAAS;QACbgC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEhC,QAAA,CAAAiC,cAAc,CAACjC,QAAA,CAAAC,IAAI,CAACiC,EAAE;;QAjChD5B,OAAA,EAAAC,QAAA,CAkCiB,MAEDwB,MAAA,QAAAA,MAAA,OApChBI,gBAAA,CAkCiB,SAED,E;QApChBjB,CAAA;QAAAkB,EAAA;;MAAAlB,CAAA;;IAAAA,CAAA;MA0CQf,YAAA,CAAcsB,qBAAA,GAEdf,mBAAA,CAGM,OAHN2B,UAGM,G,0BAFJ3B,mBAAA,CAAc,YAAV,OAAK,sBACTP,YAAA,CAA4BmC,oBAAA;IAAhBC,KAAK,EAAE/C,IAAA,CAAA+C;EAAK,mC,gDAI1B7C,YAAA,CAAkC8C,mBAAA;IAlD1C5C,GAAA;IAkDkB+B,WAAW,EAAC;gCAjDoBnC,IAAA,CAAAiD,OAAO,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}